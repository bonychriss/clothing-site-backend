{"version":3,"file":"static/js/679.ae3b9698.chunk.js","mappings":"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","sources":["components/CartSidebar.js","pages/Products.js","utils/api.js"],"sourcesContent":["import React from 'react';\r\n\r\nfunction CartSidebar({ cart, onClose, onRemove }) {\r\n  // Read currency from localStorage (default TZS)\r\n  const currency = typeof window !== 'undefined' ? (localStorage.getItem('currency') || 'TZS') : 'TZS';\r\n  // USD rate fallback (should match Products page logic)\r\n  const [usdRate, setUsdRate] = React.useState(2600);\r\n  const [loadingRate, setLoadingRate] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    setLoadingRate(true);\r\n    fetch('https://api.exchangerate.host/latest?base=TZS&symbols=USD')\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (data && data.rates && data.rates.USD) {\r\n          setUsdRate(1 / data.rates.USD);\r\n        }\r\n        setLoadingRate(false);\r\n      })\r\n      .catch(() => setLoadingRate(false));\r\n  }, []);\r\n\r\n  const convertPrice = (price) => {\r\n    if (currency === 'USD') {\r\n      return loadingRate\r\n        ? 'Loading USD rate...'\r\n        : `$${(price / usdRate).toFixed(2)}`;\r\n    }\r\n    return `TZS ${price}`;\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      right: 0,\r\n      width: '350px',\r\n      height: '100vh',\r\n      background: '#fff',\r\n      boxShadow: '-2px 0 16px #2222',\r\n      zIndex: 10002,\r\n      padding: '2rem 1.5rem',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n    }}>\r\n      <button onClick={onClose} style={{ alignSelf: 'flex-end', background: 'none', border: 'none', fontSize: '1.5rem', cursor: 'pointer', color: '#222' }}>×</button>\r\n      <h2 style={{ fontWeight: 700, fontSize: '1.3rem', marginBottom: '1.5rem', color: '#FFD700' }}>Your Cart</h2>\r\n      {cart.length === 0 ? (\r\n        <div style={{ color: '#888', textAlign: 'center', marginTop: '2rem' }}>Your cart is empty.</div>\r\n      ) : (\r\n        <div style={{ flex: 1, overflowY: 'auto' }}>\r\n          {cart.map((item, idx) => (\r\n            <div key={idx} style={{ display: 'flex', alignItems: 'center', marginBottom: '1.2rem', borderBottom: '1px solid #eee', paddingBottom: '1rem' }}>\r\n              <img src={item.image} alt={item.name} style={{ width: 60, height: 60, objectFit: 'cover', borderRadius: 8, marginRight: 16 }} />\r\n              <div style={{ flex: 1 }}>\r\n                <div style={{ fontWeight: 600 }}>{item.name}</div>\r\n                <div style={{ color: '#232F3E', fontWeight: 700, fontSize: '1rem' }}>{item.price ? convertPrice(item.price) : 'TZS 9,900'}</div>\r\n              </div>\r\n              <button onClick={() => onRemove(idx)} style={{ background: 'none', border: 'none', color: '#FF9900', fontWeight: 700, fontSize: '1.2rem', cursor: 'pointer' }}>Remove</button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      <button style={{ background: '#FFD700', color: '#222', border: 'none', borderRadius: 6, padding: '0.8rem 0', fontWeight: 700, fontSize: '1.1rem', marginTop: '2rem', cursor: 'pointer' }}>Checkout</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CartSidebar;\r\n","\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { fetchFromApi as apiFetch } from '../utils/api';\nimport CartSidebar from '../components/CartSidebar';\n\n// Skeleton loader and error fallback for images\nfunction ImageWithLoader({ src, alt, lqip }) {\n  const [loading, setLoading] = React.useState(true);\n  const [error, setError] = React.useState(false);\n  return (\n    <div style={{ position: 'relative', width: '100%', height: '100%' }}>\n      {loading && lqip && (\n        <img\n          src={lqip}\n          alt={alt + ' placeholder'}\n          style={{\n            position: 'absolute',\n            inset: 0,\n            width: '100%',\n            height: '100%',\n            objectFit: 'cover',\n            filter: 'blur(12px)',\n            transition: 'opacity 0.3s',\n            opacity: loading ? 1 : 0,\n            borderRadius: '0.75rem',\n            zIndex: 1,\n          }}\n        />\n      )}\n      <img\n        src={error ? '/images/placeholder.png' : src}\n        alt={alt}\n        loading=\"lazy\"\n        style={{ width: '100%', height: '100%', objectFit: 'cover', borderRadius: '0.75rem', display: 'block', transition: 'opacity 0.3s', opacity: loading ? 0 : 1, position: 'relative', zIndex: 2 }}\n        onLoad={() => setLoading(false)}\n        onError={() => { setError(true); setLoading(false); }}\n      />\n    </div>\n  );\n}\n\n\n\n// Utility\n// eslint-disable-next-line no-unused-vars\n// const formatCurrency = (n) => `$${Number(n).toFixed(2)}`;\n\n// Local fallback products with admin flags\n// eslint-disable-next-line no-unused-vars\n/*\nconst localProducts = [\n  // ...all product objects...\n];\n*/\n\nconst StarRating = ({ value, onChange, size = '1.1rem' }) => {\n  const stars = [1, 2, 3, 4, 5];\n  return (\n    <div style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n      {stars.map((s) => (\n        <span\n          key={s}\n          onClick={onChange ? () => onChange(s) : undefined}\n          aria-label={`Rate ${s} star${s > 1 ? 's' : ''}`}\n          style={{ background: 'none', border: 'none', cursor: onChange ? 'pointer' : 'default', lineHeight: 1, padding: 0, color: s <= Math.round(value) ? '#FFA41C' : '#ccc', fontSize: size, userSelect: 'none' }}\n          role={onChange ? 'button' : undefined}\n          tabIndex={onChange ? 0 : undefined}\n        >\n          {s <= Math.round(value) ? '★' : '☆'}\n        </span>\n      ))}\n    </div>\n  );\n};\n\nfunction Products() {\n  const [popupMsg] = useState(\"\");\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [showCart, setShowCart] = useState(false);\n  const [ratings, setRatings] = useState({});\n  const [currency, setCurrency] = useState('TZS');\n  const [usdRate, setUsdRate] = useState(2600); // Default fallback\n  const [loadingRate, setLoadingRate] = useState(false);\n  // Remove unused selectedSizes\n  const navigate = useNavigate();\n  const location = useLocation();\n  // Get search query from URL\n  const searchParams = new URLSearchParams(location.search);\n  const searchQuery = searchParams.get('search')?.toLowerCase() || '';\n  const categoryParam = searchParams.get('category');\n  const sortParam = searchParams.get('sort');\n\n  const isAuthenticated = !!localStorage.getItem('token');\n  // Add to cart handler now navigates to SelectSize page\n  const handleAddToCart = (product, id) => {\n    if (!isAuthenticated) {\n      navigate('/register'); // or '/login' if you prefer\n      return;\n    }\n    navigate('/select-size', { state: { product } });\n  };\n\n  // Handle size selection returned from SelectSize page\n  // Remove broken useEffect for selectedSize\n\n  // Fetch live USD rate from exchangerate.host\n  useEffect(() => {\n    setLoadingRate(true);\n    fetch('https://api.exchangerate.host/latest?base=TZS&symbols=USD')\n      .then(res => res.json())\n      .then(data => {\n        if (data && data.rates && data.rates.USD) {\n          setUsdRate(1 / data.rates.USD); // TZS to USD\n        }\n        setLoadingRate(false);\n      })\n      .catch(() => setLoadingRate(false));\n  }, []);\n\n  // Convert price based on currency\n  const convertPrice = (price) => {\n    if (currency === 'USD') {\n      return loadingRate\n        ? 'Loading USD rate...'\n        : `$${(price / usdRate).toFixed(2)}`;\n    }\n    return `TZS ${price}`;\n  };\n\n  // Filters & Sort\n  const [selectedCats, setSelectedCats] = useState(new Set());\n  const [priceMin, setPriceMin] = useState('');\n  const [priceMax, setPriceMax] = useState('');\n  const [ratingMin, setRatingMin] = useState(0);\n  const [sortKey, setSortKey] = useState(sortParam || 'featured');\n  const [showMobileFilters, setShowMobileFilters] = useState(false);\n\n  // Handle \"All Products\" sort option to clear category filters\n  useEffect(() => {\n    if (sortKey === 'all') {\n      setSelectedCats(new Set());\n    }\n  }, [sortKey]);\n\n  // Load and persist ratings locally\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem('productRatings');\n      if (raw) setRatings(JSON.parse(raw));\n    } catch {}\n  }, []);\n  useEffect(() => {\n    try { localStorage.setItem('productRatings', JSON.stringify(ratings)); } catch {}\n  }, [ratings]);\n\n  // Load products from API only\n  useEffect(() => {\n    const fetchAllProducts = async () => {\n      try {\n        const [productsData, bestPicksData] = await Promise.all([\n          apiFetch('/api/products').catch(() => []), // Use apiFetch and fallback to empty array on error\n          apiFetch('/api/best-picks').catch(() => [])\n        ]);\n        // Mark best picks so we can identify them later\n        const markedBestPicks = (Array.isArray(bestPicksData) ? bestPicksData : []).map(p => ({ ...p, isBestPick: true }));\n\n        const combined = [...(Array.isArray(productsData) ? productsData : []), ...markedBestPicks];\n        const uniqueProducts = Array.from(new Map(combined.map(p => [p._id || p.name, p])).values());\n        setProducts(uniqueProducts);\n        try { localStorage.setItem('backendProducts', JSON.stringify(uniqueProducts)); } catch {}\n      } catch (err) {\n        setProducts([]);\n      }\n    };\n    fetchAllProducts();\n    window.addEventListener('productsUpdated', fetchAllProducts);\n    return () => window.removeEventListener('productsUpdated', fetchAllProducts);\n  }, []);\n\n  const allCategories = useMemo(() => {\n    const s = new Set((products || []).map(p => p.category || 'General'));\n    return Array.from(s);\n  }, [products]);\n\n  // If a category is provided in the URL, preselect it in filters\n  useEffect(() => {\n    if (!categoryParam) return;\n    const requested = categoryParam.split(',').map((s) => s.trim().toLowerCase()).filter(Boolean);\n    if (!requested.length) return;\n    const lowerToActual = new Map(allCategories.map((c) => [String(c).toLowerCase(), c]));\n    const resolved = requested.map((r) => lowerToActual.get(r) || r);\n    setSelectedCats(new Set(resolved));\n  }, [categoryParam, allCategories]);\n\n  const applyFilters = (list) => {\n    let out = list;\n    if (searchQuery) {\n      out = out.filter(p =>\n        p.name?.toLowerCase().includes(searchQuery) ||\n        p.category?.toLowerCase().includes(searchQuery) ||\n        p.desc?.toLowerCase().includes(searchQuery) ||\n        p.description?.toLowerCase().includes(searchQuery)\n      );\n    }\n    if (selectedCats.size) out = out.filter(p => selectedCats.has(p.category || 'General'));\n    const min = priceMin !== '' ? Number(priceMin) : -Infinity;\n    const max = priceMax !== '' ? Number(priceMax) : Infinity;\n    out = out.filter(p => (p.price ?? 0) >= min && (p.price ?? 0) <= max);\n    out = out.filter(p => (ratings[p._id || p.id || p.name] ?? p.rating ?? 4) >= ratingMin);\n    return out;\n  };\n\n  const applySort = (list) => {\n    const copy = [...list];\n    switch (sortKey) {\n      case 'all':\n        // No specific sort order, just clears filters via useEffect\n        break;\n      case 'new-arrivals':\n        copy.sort((a, b) => (b.isNewArrival ? 1 : 0) - (a.isNewArrival ? 1 : 0));\n        break;\n      case 'price-asc':\n        copy.sort((a,b) => (a.price ?? 0) - (b.price ?? 0));\n        break;\n      case 'price-desc':\n        copy.sort((a,b) => (b.price ?? 0) - (a.price ?? 0));\n        break;\n      case 'rating': {\n        const r = (p) => ratings[p._id || p.id || p.name] ?? p.rating ?? 0;\n        copy.sort((a,b) => r(b) - r(a));\n        break;\n      }\n      case 'reviews':\n        copy.sort((a,b) => (b.reviews ?? 0) - (a.reviews ?? 0));\n        break;\n      default:\n        // featured: keep input order, but nudge badges to front\n        copy.sort((a,b) => ((b.isBestSeller || b.isOverallPick) ? 1 : 0) - ((a.isBestSeller || a.isOverallPick) ? 1 : 0));\n    }\n    return copy;\n  };\n\n  // const filtered = applyFilters(products); // unused\n  // Removed duplicate declaration of 'visible'.\n\n  const toggleCategory = (cat) => {\n    const next = new Set(selectedCats);\n    if (next.has(cat)) next.delete(cat); else next.add(cat);\n    setSelectedCats(next);\n  };\n\n  const handleRemoveFromCart = (idx) => setCart(cart.filter((_, i) => i !== idx));\n  const handleCloseCart = () => setShowCart(false);\n\n  const getId = (p, idx) => p._id || p.id || String(idx);\n\n  const visible = useMemo(() => {\n    const filtered = applyFilters(products);\n    return applySort(filtered);\n  }, [products, applyFilters, applySort]);\n\n  // Styles\n  const pageStyle = { maxWidth: 'none', width: '100%', margin: '0', padding: '0 2rem 2rem 0', boxSizing: 'border-box', display: 'block' };\n  const layoutStyle = {\n    display: 'grid',\n    gridTemplateColumns: '260px 1fr',\n    gap: '2rem',\n  };\n  const sidebarStyle = {\n    position: 'sticky',\n    top: 16,\n    alignSelf: 'start',\n    background: '#fff',\n    border: '1px solid #eee',\n    borderRadius: 12,\n    padding: '1rem',\n    boxShadow: '0 2px 12px rgba(0,0,0,0.04)',\n    // Hide sidebar on mobile\n    display: 'block',\n  };\n  const sectionTitle = { fontWeight: 700, margin: '0.25rem 0 0.5rem', color: '#111' };\n  const filterItem = { display: 'flex', alignItems: 'center', gap: 8, margin: '0.35rem 0' };\n\n  const topbarStyle = {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    gap: '1rem',\n    padding: '0.75rem 0',\n  };\n\n  const gridStyle = {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(4, 1fr)',\n    gap: '1.5rem',\n    minHeight: 120,\n  };\n  \n  return (\n    <div className=\"products products-page\" style={pageStyle}\n    >\n      {popupMsg && (\n        <div style={{position:'fixed',top:80,right:30,zIndex:9999,background:'#FFD700',color:'#222',padding:'1rem 2rem',borderRadius:12,boxShadow:'0 2px 12px #0002',fontWeight:700,fontSize:'1.1rem'}}>\n          {popupMsg}\n        </div>\n      )}\n      <h1 style={{ color: '#222', fontWeight: 800, fontSize: '2.2rem', margin: '2rem 0 1.5rem 0', textAlign: 'center' }}>Products</h1>\n\n      {/* Currency changer below nav/top bar, only in Products page */}\n      <div style={{ width: '100%', background: '#fff', boxShadow: '0 2px 8px rgba(0,0,0,0.04)', padding: '1rem 0', marginBottom: '0.5rem' }}>\n        <div style={{ maxWidth: 1100, margin: '0 auto', display: 'flex', alignItems: 'center', justifyContent: 'flex-end' }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n            <label htmlFor=\"currency\" style={{ fontWeight: 600 }}>Currency:</label>\n            <select\n              id=\"currency\"\n              value={currency}\n              onChange={e => {\n                setCurrency(e.target.value);\n                if (typeof window !== 'undefined') {\n                  localStorage.setItem('currency', e.target.value);\n                }\n              }}\n              style={{ padding: '0.4em 1em', borderRadius: 8, border: '1px solid #FFD700', fontWeight: 600 }}\n            >\n              <option value=\"TZS\">TZS (Tanzanian Shilling)</option>\n              <option value=\"USD\">USD (Dollar)</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Mobile Filter Toggle Button */}\n      <div className=\"mobile-filter-toggle\" style={{ marginBottom: '1rem' }}>\n        <button\n          onClick={() => setShowMobileFilters(!showMobileFilters)}\n          style={{ background: '#FFD700', color: '#222', border: 'none', borderRadius: 8, padding: '0.6rem 1.2rem', fontWeight: 700, fontSize: '1rem', cursor: 'pointer', width: '100%' }}\n        >\n          {showMobileFilters ? 'Hide' : 'Show'} Filters\n        </button>\n      </div>\n\n\n      {/* Top bar: result count and sort */}\n      <div style={topbarStyle}>\n        <div style={{ color: '#555' }}>{visible.length} items</div>\n        <label style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n          <span style={{ color: '#333', fontWeight: 600 }}>Sort by:</span>\n          <select value={sortKey} onChange={(e) => setSortKey(e.target.value)} style={{ padding: '0.4rem 0.6rem', borderRadius: 8, border: '1px solid #ddd' }}>\n            <option value=\"all\">All Products</option>\n            <option value=\"new-arrivals\">New Arrivals</option>\n            <option value=\"featured\">Featured</option>\n            <option value=\"price-asc\">Price: Low to High</option>\n            <option value=\"price-desc\">Price: High to Low</option>\n            <option value=\"rating\">Rating</option>\n            <option value=\"reviews\">Reviews</option>\n          </select>\n        </label>\n      </div>\n\n      {/* Layout: sidebar + grid */}\n      <div style={layoutStyle} className=\"products-layout-responsive\">\n        {/* Sidebar: hide on mobile */}\n        <aside className={`products-sidebar ${showMobileFilters ? 'mobile-visible' : ''}`} style={sidebarStyle}>\n          <div style={{ marginBottom: '1rem' }}>\n            <div style={sectionTitle}>Departments</div>\n            {allCategories.map((c) => (\n              <label key={c} style={filterItem}>\n                <input type=\"checkbox\" checked={selectedCats.has(c)} onChange={() => toggleCategory(c)} style={{ accentColor: '#FFD700' }} />\n                <span style={{ color: '#333' }}>{c}</span>\n              </label>\n            ))}\n          </div>\n\n          <div style={{ marginBottom: '1rem' }}>\n            <div style={sectionTitle}>Customer Reviews</div>\n            {[4,3,2,1].map((n) => (\n              <button key={n} onClick={() => setRatingMin(n)} style={{ ...filterItem, background: 'none', border: 'none', cursor: 'pointer', color: ratingMin === n ? '#111' : '#444' }}>\n                <StarRating value={n} size=\"1rem\" />\n                <span>&nbsp;&amp; Up</span>\n              </button>\n            ))}\n            {ratingMin > 0 && (\n              <button onClick={() => setRatingMin(0)} style={{ marginTop: 6, background: 'none', border: 'none', color: '#FF9900', cursor: 'pointer', fontWeight: 700 }}>Clear rating</button>\n            )}\n          </div>\n\n          <div>\n            <div style={sectionTitle}>Price</div>\n            <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>\n              <input type=\"number\" placeholder=\"Min\" value={priceMin} onChange={(e) => setPriceMin(e.target.value)} style={{ width: 90, padding: '0.4rem', borderRadius: 8, border: '1px solid #ddd' }} />\n              <span>—</span>\n              <input type=\"number\" placeholder=\"Max\" value={priceMax} onChange={(e) => setPriceMax(e.target.value)} style={{ width: 90, padding: '0.4rem', borderRadius: 8, border: '1px solid #ddd' }} />\n            </div>\n            {(priceMin !== '' || priceMax !== '') && (\n              <button onClick={() => { setPriceMin(''); setPriceMax(''); }} style={{ marginTop: 6, background: 'none', border: 'none', color: '#FF9900', cursor: 'pointer', fontWeight: 700 }}>Clear price</button>\n            )}\n          </div>\n        </aside>\n\n        {/* Best Picks */}\n        <main>\n          <div style={gridStyle} className=\"products-grid-responsive\">\n            {visible.length === 0 ? (\n              <div style={{ gridColumn: '1/-1', textAlign: 'center', color: '#888', fontSize: '1.1rem', padding: '2rem 0' }}>\n                No products match your filters.\n              </div>\n            ) : (\n              visible.map((product, idx) => {\n                const id = getId(product, idx);\n                const userRating = ratings[id];\n                const ratingValue = userRating ?? product.rating ?? 4;\n                return (\n                  <div className=\"product-card\" key={id} style={{\n                    position: 'relative',\n                    background: '#fff',\n                    border: '1px solid #e5e7eb',\n                    borderRadius: '1.25rem',\n                    boxShadow: '0 4px 12px rgba(0,0,0,0.04)',\n                    padding: '1.25rem',\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    textAlign: 'center',\n                    justifyContent: 'flex-start',\n                    overflow: 'hidden',\n                    minHeight: 380,\n                  }}> \n                    {/* Badges */}\n                    {product.isNewArrival === true && (\n                      <div style={{\n                        position: 'absolute',\n                        top: '15px',\n                        right: '-30px',\n                        background: '#FFD700',\n                        color: '#222',\n                        padding: '5px 35px',\n                        fontWeight: 'bold',\n                        fontSize: '12px',\n                        transform: 'rotate(45deg)',\n                        boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\n                        zIndex: 50,\n                        letterSpacing: '1px',\n                        textShadow: '0 1px 2px #fff8',\n                        whiteSpace: 'nowrap',\n                        pointerEvents: 'none',\n                        userSelect: 'none',\n                      }}>NEW ARRIVAL</div>\n                    )}\n                    {product.inStock && product.isBestSeller && <span style={{ position: 'absolute', top: 12, left: 12, background: '#FF9900', color: '#fff', fontWeight: 700, fontSize: '0.8rem', borderRadius: 6, padding: '2px 8px' }}>Best Seller</span>}\n                    {/* Remove SOLD OUT badge for Best Picks */}\n                    {/* Remove SOLD OUT badge for Sabor Best Picks */}\n                    {!product.inStock && !product.isBestSeller && !product.isOverallPick && !product.isBestPick && product.category !== 'Sabor Best Picks' && (\n                      <div style={{\n                        position: 'absolute',\n                        top: '15px',\n                        right: '-30px',\n                        background: '#e74c3c',\n                        color: 'white',\n                        padding: '5px 35px',\n                        fontWeight: 'bold',\n                        fontSize: '12px',\n                        transform: 'rotate(45deg)',\n                        boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\n                        zIndex: 10,\n                      }}>SOLD OUT</div>\n                    )}\n                    {product.inStock && product.isOverallPick && <span style={{ position: 'absolute', top: 12, right: 12, background: '#232F3E', color: '#fff', fontWeight: 700, fontSize: '0.8rem', borderRadius: 6, padding: '2px 8px' }}>Overall Pick</span>}\n\n                    {/* Image */}\n                    <div style={{ width: '100%', height: 220, marginBottom: '1rem', overflow: 'hidden', borderRadius: '0.75rem', position: 'relative' }}>\n                      <ImageWithLoader src={product.image} alt={product.name} lqip={product.lqip} />\n                    </div>\n\n                    {/* Title */}\n                    <div style={{ width: '100%', marginBottom: 6, fontSize: '1rem', fontWeight: 700, color: '#111', textAlign: 'center', display: '-webkit-box', WebkitLineClamp: 2, WebkitBoxOrient: 'vertical', overflow: 'hidden' }}>{product.name}</div>\n                    {/* Description */}\n                    <div style={{ width: '100%', color: '#333', fontSize: '0.95rem', lineHeight: 1.4, marginBottom: 8, textAlign: 'center' }}>\n                      {product.description || product.desc || 'Premium quality at a great price.'}\n                    </div>\n\n                    {/* Rating + Reviews */}\n                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: 8, marginBottom: 6 }}>\n                      <StarRating value={ratingValue} onChange={(v) => setRatings({ ...ratings, [id]: v })} />\n                      <span style={{ fontSize: '0.9rem', color: '#555' }}>{product.reviews ? product.reviews.toLocaleString() : '1,000+'}</span>\n                    </div>\n\n                    {/* Price */}\n                    <div style={{ display: 'flex', alignItems: 'baseline', justifyContent: 'center', gap: 8, marginTop: 4 }}>\n                      <div style={{ fontWeight: 800, fontSize: '1.15rem', color: '#FFD700' }}>{product.price ? convertPrice(product.price) : 'TZS 9,900'}</div>\n                      {product.listPrice && (\n                        <div style={{ color: '#777', textDecoration: 'line-through', fontSize: '0.95rem' }}>{convertPrice(product.listPrice)}</div>\n                      )}\n                    </div>\n\n                    {/* Size Selector Button navigates to SelectSize page */}\n                    <div style={{ width: '100%', marginTop: 8 }}>\n                      <button\n                        type=\"button\"\n                        style={{ background: '#FFD700', color: '#222', border: 'none', borderRadius: 8, padding: '0.5rem 1.2rem', fontWeight: 700, width: '100%', maxWidth: 180, cursor: (!product.inStock && !product.isBestPick) ? 'not-allowed' : 'pointer', marginBottom: 6, opacity: (!product.inStock && !product.isBestPick) ? 0.6 : 1 }}\n                        aria-label={'Add to cart'}\n                        disabled={!product.inStock && !product.isBestPick}\n                        onClick={() => {\n                          if (product.inStock || product.isBestPick) handleAddToCart(product, id);\n                        }}\n                      >\n                        {(!product.inStock && !product.isBestPick) ? (\n                          <span>Out of Stock</span>\n                        ) : (\n                          <><i className=\"fas fa-shopping-cart\" style={{ marginRight: '8px' }}></i><span>Add to Cart</span></>\n                        )}\n                      </button>\n                    </div>\n\n                  </div>\n                );\n              })\n            )}\n          </div>\n        </main>\n      </div>\n\n\n      {showCart && (\n        <CartSidebar cart={cart} onClose={handleCloseCart} onRemove={handleRemoveFromCart} />\n      )}\n\n      {/* Simple responsive tweak */}\n      <style>{`\n        .products.products-page {\n          padding: 0 2rem 2rem 2rem !important;\n        }\n        .mobile-filter-toggle {\n          display: none;\n        }\n        /* Tablet and smaller desktop */\n        @media (max-width: 980px) {\n          .products-layout-responsive {\n            grid-template-columns: 1fr !important;\n          }\n          .products-sidebar {\n            display: none; /* Hide sidebar on mobile */\n            position: static;\n            margin-bottom: 1.5rem;\n          }\n          .products-sidebar.mobile-visible {\n            display: block; /* Show when toggled */\n          }\n          .mobile-filter-toggle {\n            display: block; /* Show the toggle button */\n            max-width: 600px;\n            margin: 0 auto 1rem auto;\n          }\n          .products-grid-responsive {\n            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)) !important;\n          }\n        }\n        /* Mobile phones */\n        @media (max-width: 600px) {\n          .products.products-page {\n            padding: 0 1rem 2rem 1rem !important;\n          }\n          .products-grid-responsive {\n            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)) !important;\n            gap: 1rem !important;\n          }\n        }\n      `}</style>\n\n    </div>\n  );\n}\n\nexport default Products;\n","// Basic API utility for making requests\r\n// You can customize this as needed for your project\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://sabor-espanol-ed87.onrender.com';\r\n\r\nexport async function fetchFromApi(endpoint, options = {}) {\r\n  const res = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n    credentials: 'include',\r\n    ...options,\r\n  });\r\n  if (!res.ok) {\r\n    // Try to parse the error response from the server\r\n    try {\r\n      const errorData = await res.json();\r\n      // Create a new error object with the server's message\r\n      const error = new Error(errorData.message || `API error: ${res.status}`);\r\n      error.data = errorData; // Attach full error data\r\n      throw error;\r\n    } catch (e) {\r\n      // If parsing fails, throw a generic error\r\n      throw new Error(`API error: ${res.status}`);\r\n    }\r\n  }\r\n  return res.json();\r\n}\r\n"],"names":["_ref","cart","onClose","onRemove","currency","window","localStorage","getItem","usdRate","setUsdRate","React","loadingRate","setLoadingRate","fetch","then","res","json","data","rates","USD","catch","_jsxs","style","position","top","right","width","height","background","boxShadow","zIndex","padding","display","flexDirection","children","_jsx","onClick","alignSelf","border","fontSize","cursor","color","fontWeight","marginBottom","length","textAlign","marginTop","flex","overflowY","map","item","idx","alignItems","borderBottom","paddingBottom","src","image","alt","name","objectFit","borderRadius","marginRight","price","concat","toFixed","ImageWithLoader","lqip","loading","setLoading","error","setError","inset","filter","transition","opacity","onLoad","onError","StarRating","_ref2","value","onChange","size","gap","s","undefined","lineHeight","Math","round","userSelect","role","tabIndex","_searchParams$get","popupMsg","useState","products","setProducts","setCart","showCart","setShowCart","ratings","setRatings","setCurrency","navigate","useNavigate","location","useLocation","searchParams","URLSearchParams","search","searchQuery","get","toLowerCase","categoryParam","sortParam","isAuthenticated","useEffect","convertPrice","selectedCats","setSelectedCats","Set","priceMin","setPriceMin","priceMax","setPriceMax","ratingMin","setRatingMin","sortKey","setSortKey","showMobileFilters","setShowMobileFilters","raw","JSON","parse","_unused","setItem","stringify","_unused2","fetchAllProducts","async","productsData","bestPicksData","Promise","all","apiFetch","markedBestPicks","Array","isArray","p","_objectSpread","isBestPick","combined","uniqueProducts","from","Map","_id","values","_unused3","err","addEventListener","removeEventListener","allCategories","useMemo","category","requested","split","trim","Boolean","lowerToActual","c","String","resolved","r","applyFilters","list","out","_p$name","_p$category","_p$desc","_p$description","includes","desc","description","has","min","Number","Infinity","max","_p$price","_p$price2","_ref3","_ratings","id","rating","applySort","copy","sort","a","b","isNewArrival","_a$price","_b$price","_b$price2","_a$price2","_ref4","_ratings2","_b$reviews","_a$reviews","reviews","isBestSeller","isOverallPick","visible","filtered","sectionTitle","margin","filterItem","className","maxWidth","boxSizing","justifyContent","htmlFor","e","target","gridTemplateColumns","type","checked","cat","next","delete","add","toggleCategory","accentColor","n","placeholder","minHeight","gridColumn","product","_ref5","getId","userRating","ratingValue","overflow","transform","letterSpacing","textShadow","whiteSpace","pointerEvents","inStock","left","WebkitLineClamp","WebkitBoxOrient","v","toLocaleString","listPrice","textDecoration","disabled","handleAddToCart","state","_Fragment","CartSidebar","handleCloseCart","_","i","API_BASE_URL","process","fetchFromApi","endpoint","options","arguments","credentials","ok","errorData","Error","message","status"],"sourceRoot":""}