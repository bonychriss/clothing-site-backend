"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[624],{624:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var i=n(555),r=n(43),o=n(60),a=n(204),s=n(862),d=n(579);function l(e){let{onProductAdded:t,styles:n}=e;const[o,a]=(0,r.useState)({name:"",price:"",category:"",description:"",image:null}),[l,c]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[h,g]=(0,r.useState)(""),u=e=>{const{name:t,value:n,files:r}=e.target;"image"===t&&r&&r[0]?(a(e=>(0,i.A)((0,i.A)({},e),{},{image:r[0]})),c(URL.createObjectURL(r[0]))):a(e=>(0,i.A)((0,i.A)({},e),{},{[t]:n}))};return(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(!0),g("");try{const e=new FormData;e.append("name",o.name),e.append("price",o.price),e.append("category",o.category),e.append("description",o.description),o.image&&e.append("image",o.image);const n=await(0,s.$)("/api/products",{method:"POST",body:e});t(n),a({name:"",price:"",category:"",description:"",image:null}),c(null)}catch(n){g(n.message)}finally{m(!1)}},style:{marginBottom:24,display:"flex",flexDirection:"column",gap:"1rem",maxWidth:"600px"},encType:"multipart/form-data",children:[h&&(0,d.jsx)("div",{style:{color:"red",marginBottom:12},children:h}),(0,d.jsx)("input",{name:"name",value:o.name,onChange:u,placeholder:"Product Name",style:n.formInput,required:!0}),(0,d.jsx)("input",{name:"price",value:o.price,onChange:u,placeholder:"Price",type:"number",step:"0.01",style:n.formInput,required:!0}),(0,d.jsx)("textarea",{name:"description",value:o.description,onChange:u,placeholder:"Description",style:(0,i.A)((0,i.A)({},n.formInput),{},{minHeight:"80px",resize:"vertical"})}),(0,d.jsxs)("select",{name:"category",value:o.category,onChange:u,style:n.formSelect,required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select Category"}),(0,d.jsx)("option",{value:"Men",children:"Men"}),(0,d.jsx)("option",{value:"Women",children:"Women"}),(0,d.jsx)("option",{value:"Boys",children:"Boys"}),(0,d.jsx)("option",{value:"Footwear",children:"Footwear"}),(0,d.jsx)("option",{value:"Dresses",children:"Dresses"}),(0,d.jsx)("option",{value:"Suits",children:"Suits"}),(0,d.jsx)("option",{value:"Accessories",children:"Accessories"}),(0,d.jsx)("option",{value:"Casual",children:"Casual"}),(0,d.jsx)("option",{value:"Official",children:"Official"}),(0,d.jsx)("option",{value:"Outdoor",children:"Outdoor"})]}),(0,d.jsx)("input",{name:"image",type:"file",accept:"image/*",onChange:u,style:n.formInput,required:!0}),l&&(0,d.jsx)("img",{src:l,alt:"Preview",style:{maxHeight:80,borderRadius:4,alignSelf:"flex-start"}}),(0,d.jsx)("button",{type:"submit",style:n.button,disabled:p,children:"Add Product"})]})}const c=function(){const e=(0,o.Zp)(),t=(0,o.zy)(),[n,c]=(0,r.useState)(()=>localStorage.getItem("adminTheme")||"dark"),[p,m]=(0,r.useState)("checking"),[h,g]=(0,r.useState)(()=>{const e=localStorage.getItem("token");if(!e)return!1;try{return 1e3*JSON.parse(atob(e.split(".")[1])).exp>Date.now()}catch(t){return!1}});(0,r.useEffect)(()=>{localStorage.setItem("adminTheme",n)},[n]),(0,r.useEffect)(()=>{const e=async()=>{try{"ok"===(await(0,s.$)("/api/health")).status?m("online"):m("offline")}catch(e){m("offline")}};e();const t=setInterval(e,1e4);return()=>clearInterval(t)},[]);const[u,x]=(0,r.useState)("undefined"===typeof window||window.innerWidth>768);(0,r.useEffect)(()=>{const e=()=>{window.innerWidth<=768?x(!1):x(!0)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const[f,y]=(0,r.useState)([]),[j,b]=(0,r.useState)(null),[v,S]=(0,r.useState)(null),[k,A]=(0,r.useState)({name:"",price:"",category:"",description:"",image:null,isNewArrival:!1}),[w,C]=(0,r.useState)(!1),[D,F]=(0,r.useState)([]),[z,P]=(0,r.useState)({name:"",price:"",category:"",description:"",image:null}),[T,B]=(0,r.useState)(null),[E,I]=(0,r.useState)(!1),[O,W]=(0,r.useState)(""),[_,N]=(0,r.useState)([]),[R,L]=(0,r.useState)([]),[q,$]=(0,r.useState)(null),[H,M]=(0,r.useState)(!0),[U,Z]=(0,r.useState)(""),V=function(e){Z({text:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"}),setTimeout(()=>{Z("")},3e3)},J=e=>{const{name:t,value:n,type:r,checked:o,files:a}=e.target;"image"===t&&a&&a[0]?A(e=>(0,i.A)((0,i.A)({},e),{},{image:a[0]})):A("checkbox"===r?e=>(0,i.A)((0,i.A)({},e),{},{[t]:o}):e=>(0,i.A)((0,i.A)({},e),{},{[t]:n}))},Y=e=>{const{name:t,value:n,files:r}=e.target;"image"===t&&r&&r[0]?(P(e=>(0,i.A)((0,i.A)({},e),{},{image:r[0]})),B(URL.createObjectURL(r[0]))):P(e=>(0,i.A)((0,i.A)({},e),{},{[t]:n}))},Q=async(e,t)=>{$(null);try{const n=await(0,s.$)("/api/orders/".concat(e),{method:"PATCH",body:JSON.stringify({status:t})});N(e=>e.map(e=>e._id===n._id?n:e))}catch(n){$(n.message)}},G=async()=>{M(!0);try{const[e,t,n]=await Promise.all([(0,s.$)("/api/products"),(0,s.$)("/api/best-picks"),(0,s.$)("/api/orders")]);y(Array.isArray(e)?e:[]),F(Array.isArray(t)?t:[]),N(Array.isArray(n)?n:[])}catch(e){b("Failed to fetch admin data")}finally{M(!1)}};(0,r.useEffect)(()=>{h&&G();const e=()=>G();return window.addEventListener("productsUpdated",e),()=>window.removeEventListener("productsUpdated",e)},[h]);const K=(0,r.useMemo)(()=>(e=>({header:{textAlign:"center",marginBottom:32,fontWeight:800,letterSpacing:1.5,fontSize:16,background:"light"===e?"#f7f7f7":"#333",color:"light"===e?"#222":"#FFD700",width:"100%",padding:10},section:{background:"light"===e?"#fff":"#333",borderRadius:12,boxShadow:"light"===e?"0 2px 12px rgba(0,0,0,0.04)":"0 2px 12px rgba(0,0,0,0.15)",padding:"1.5rem",marginBottom:"1.5rem"},sectionHeader:{color:"#FFD700",fontWeight:800,fontSize:"1.5rem",marginBottom:"1rem",borderBottom:"1px solid ".concat("light"===e?"#eee":"#555"),paddingBottom:"0.5rem"},formInput:{padding:"0.7em 1em",borderRadius:8,border:"1px solid ".concat("light"===e?"#ddd":"#555"),fontSize:"1rem",width:"100%",boxSizing:"border-box",background:"light"===e?"#fff":"#444",color:"light"===e?"#222":"#f7f7f7"},formSelect:{padding:"0.7em 1em",borderRadius:8,border:"1px solid ".concat("light"===e?"#ddd":"#555"),fontSize:"1rem",width:"100%",boxSizing:"border-box",background:"light"===e?"#fff":"#444",color:"light"===e?"#222":"#f7f7f7"},button:{background:"#FFD700",color:"#222",border:"none",borderRadius:8,padding:"0.7em 1.5em",fontWeight:700,fontSize:"1.1rem",cursor:"pointer",transition:"background 0.2s"},card:{background:"light"===e?"#fff":"#444",borderRadius:12,boxShadow:"light"===e?"0 2px 8px rgba(0,0,0,0.03)":"0 2px 8px rgba(0,0,0,0.1)",padding:"1rem",border:"1px solid ".concat("light"===e?"#eee":"#555")}}))(n),[n]),X=[{key:"dashboard",label:"Dashboard",icon:(0,d.jsx)(a.$BV,{}),path:"/admin/dashboard"},{key:"product",label:"Products",icon:(0,d.jsx)(a.rrY,{}),path:"/admin/products"},{key:"bestpicks",label:"Best Picks",icon:(0,d.jsx)(a.gt3,{}),path:"/admin/bestpicks"},{key:"orders",label:"Orders",icon:(0,d.jsx)(a.kkc,{}),path:"/admin/orders"}];return h?(0,d.jsxs)("div",{className:"admin-page ".concat(n),children:[(0,d.jsxs)("aside",{className:"sidebar ".concat(u?"open":""),children:[(0,d.jsx)("button",{className:"hamburger",onClick:()=>x(!u),children:(0,d.jsx)(a.$BV,{})}),(0,d.jsxs)("div",{className:"sidebar-header",children:[(0,d.jsx)(a.NBi,{size:32}),(0,d.jsx)("span",{className:"sidebar-username",children:"Admin"})]}),(0,d.jsx)("nav",{className:"sidebar-nav",children:(0,d.jsx)("ul",{children:X.map(e=>(0,d.jsx)("li",{children:(0,d.jsxs)("a",{href:e.path,className:t.pathname.startsWith(e.path)?"active":"",children:[e.icon,(0,d.jsx)("span",{children:e.label})]})},e.key))})}),(0,d.jsxs)("div",{className:"sidebar-footer",children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"0.5rem 1rem",borderRadius:8,background:"light"===n?"#eee":"#444"},children:[(0,d.jsx)("span",{style:{width:10,height:10,borderRadius:"50%",background:"online"===p?"#28a745":"offline"===p?"#dc3545":"#ffc107",boxShadow:"0 0 8px ".concat("online"===p?"#28a745":"transparent")}}),(0,d.jsxs)("span",{style:{fontWeight:600,fontSize:"0.9rem",textTransform:"capitalize"},children:["Backend: ",p]})]}),(0,d.jsxs)("button",{className:"theme-toggle",onClick:()=>c("light"===n?"dark":"light"),children:[" ","light"===n?(0,d.jsx)(a.V6H,{}):(0,d.jsx)(a.wQq,{})," Theme"]}),(0,d.jsxs)("button",{className:"logout-btn",onClick:()=>{g(!1),localStorage.removeItem("token"),localStorage.removeItem("user"),e("/login")},children:[(0,d.jsx)(a.axc,{})," ",(0,d.jsx)("span",{children:"Logout"})]})]})]}),(0,d.jsx)("main",{className:"admin-content",children:(0,d.jsxs)("div",{style:{padding:"0 1rem"},children:[U&&(0,d.jsx)("div",{style:{position:"fixed",top:20,right:20,zIndex:2e3,padding:"1rem 1.5rem",borderRadius:8,background:"error"===U.type?"#c00":"#1a7f37",color:"#fff",fontWeight:600,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:U.text}),(0,d.jsxs)(o.BV,{children:[(0,d.jsx)(o.qh,{path:"dashboard",element:(0,d.jsxs)("div",{style:K.section,children:[(0,d.jsx)("h2",{style:K.sectionHeader,children:"Dashboard Overview"}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[(0,d.jsxs)("div",{style:(0,i.A)((0,i.A)({},K.card),{},{textAlign:"center",padding:"1.5rem"}),children:[(0,d.jsx)("h3",{style:{margin:0,color:"#FFD700",fontSize:"1.1rem"},children:"Total Products"}),(0,d.jsx)("p",{style:{fontSize:"2.5rem",fontWeight:800,margin:"0.5rem 0 0"},children:f.length})]}),(0,d.jsxs)("div",{style:(0,i.A)((0,i.A)({},K.card),{},{textAlign:"center",padding:"1.5rem"}),children:[(0,d.jsx)("h3",{style:{margin:0,color:"#FFD700",fontSize:"1.1rem"},children:"Total Orders"}),(0,d.jsx)("p",{style:{fontSize:"2.5rem",fontWeight:800,margin:"0.5rem 0 0"},children:_.length})]}),(0,d.jsxs)("div",{style:(0,i.A)((0,i.A)({},K.card),{},{textAlign:"center",padding:"1.5rem"}),children:[(0,d.jsx)("h3",{style:{margin:0,color:"#FFD700",fontSize:"1.1rem"},children:"Pending Orders"}),(0,d.jsx)("p",{style:{fontSize:"2.5rem",fontWeight:800,margin:"0.5rem 0 0"},children:_.filter(e=>"Pending"===e.status).length})]}),(0,d.jsxs)("div",{style:(0,i.A)((0,i.A)({},K.card),{},{textAlign:"center",padding:"1.5rem"}),children:[(0,d.jsx)("h3",{style:{margin:0,color:"#FFD700",fontSize:"1.1rem"},children:"Total Revenue"}),(0,d.jsxs)("p",{style:{fontSize:"2rem",fontWeight:800,margin:"0.5rem 0 0"},children:["TZS ",_.filter(e=>"Confirmed"===e.status||"Delivered"===e.status).reduce((e,t)=>e+t.total,0).toLocaleString()]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:(0,i.A)((0,i.A)({},K.sectionHeader),{},{fontSize:"1.3rem"}),children:"Recent Orders"}),H?(0,d.jsx)("p",{children:"Loading recent orders..."}):(0,d.jsx)("ul",{style:{listStyle:"none",padding:0},children:_.slice(0,5).map(e=>{var t;return(0,d.jsxs)("li",{style:(0,i.A)((0,i.A)({},K.card),{},{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"}),children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{fontWeight:700},children:(null===(t=e.customer)||void 0===t?void 0:t.name)||"N/A"}),(0,d.jsxs)("div",{style:{fontSize:14,color:"#aaa"},children:[new Date(e.createdAt).toLocaleString()," - TZS ",e.total.toLocaleString()]})]}),(0,d.jsx)("div",{style:{fontWeight:600,background:"#FFD70022",color:"#FFD700",padding:"0.3rem 0.8rem",borderRadius:6},children:e.status})]},e._id)})})]})]})}),(0,d.jsx)(o.qh,{path:"products",element:(0,d.jsxs)("div",{style:K.section,children:[(0,d.jsx)("h2",{style:K.sectionHeader,children:"Product Management"}),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{marginBottom:"2rem",borderBottom:"1px solid ".concat("light"===n?"#eee":"#555"),paddingBottom:"1.5rem"},children:[(0,d.jsx)("h3",{style:{color:"#FFD700",fontWeight:700},children:"Add New Product"}),(0,d.jsx)(l,{onProductAdded:e=>y(t=>[e,...t]),styles:K})]}),(0,d.jsx)("h3",{style:{color:"#FFD700",fontWeight:700,marginTop:"2rem"},children:"Existing Products"}),j&&(0,d.jsx)("div",{style:{color:"red",marginBottom:12},children:j}),(0,d.jsx)("ul",{style:{listStyle:"none",padding:0},children:f.map(e=>{var t;return(0,d.jsxs)("li",{style:(0,i.A)((0,i.A)({},K.card),{},{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"}),children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,d.jsx)("img",{src:e.image,alt:e.name,style:{width:50,height:50,objectFit:"cover",borderRadius:8}}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{fontWeight:700},children:e.name}),(0,d.jsxs)("div",{style:{fontSize:14,color:"#aaa"},children:[e.category," - TZS ",null===(t=e.price)||void 0===t?void 0:t.toLocaleString()]})]}),(0,d.jsx)("div",{style:{padding:"0.2rem 0.6rem",borderRadius:"6px",fontWeight:600,background:e.inStock?"#d4f8e8":"#ffe7ba",color:e.inStock?"#1a7f37":"#b8860b"},children:e.inStock?"In Stock":"Out of Stock"})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,d.jsx)("button",{style:(0,i.A)((0,i.A)({},K.button),{},{padding:"0.4em 0.8em",fontSize:"0.9rem"}),onClick:()=>(e=>{S(e),A({name:e.name,price:e.price,category:e.category,description:e.description,inStock:!1!==e.inStock})})(e),children:"Edit"}),(0,d.jsx)("button",{style:(0,i.A)((0,i.A)({},K.button),{},{background:"#c00",color:"#fff",padding:"0.4em 0.8em",fontSize:"0.9rem"}),onClick:async()=>{if(window.confirm("Delete this product?"))try{await(0,s.$)("/api/products/".concat(e._id),{method:"DELETE"}),y(t=>t.filter(t=>t._id!==e._id)),V("Product deleted successfully.")}catch(t){V("Failed to delete product.","error")}},children:"Delete"}),(0,d.jsx)("button",{style:(0,i.A)((0,i.A)({},K.button),{},{background:e.inStock?"#f0ad4e":"#5cb85c",color:"#fff",padding:"0.4em 0.8em",fontSize:"0.9rem"}),onClick:()=>(async(e,t)=>{const n=!t;try{const t=await(0,s.$)("/api/products/".concat(e,"/stock"),{method:"PATCH",body:JSON.stringify({inStock:n})});y(e=>e.map(e=>e._id===t._id?t:e)),V("Product stock set to ".concat(n?"In Stock":"Out of Stock","."))}catch(i){V(i.message,"error")}})(e._id,e.inStock),children:e.inStock?"Set Out of Stock":"Restock"})]})]},e._id)})})]}),v&&(0,d.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,d.jsxs)("div",{style:{background:K.section.background,padding:"2rem",borderRadius:12,maxWidth:600,width:"90%",maxHeight:"90vh",overflowY:"auto",position:"relative"},children:[(0,d.jsx)("h3",{style:(0,i.A)((0,i.A)({},K.sectionHeader),{},{marginTop:0}),children:"Edit Product"}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),C(!0),b("");try{const e=new FormData;e.append("name",k.name),e.append("price",k.price),e.append("category",k.category),e.append("description",k.description),k.image&&"string"!==typeof k.image&&e.append("image",k.image);const t=await(0,s.$)("/api/products/".concat(v._id),{method:"PUT",body:e});y(e=>e.map(e=>e._id===t._id?t:e)),window.dispatchEvent(new Event("productsUpdated")),S(null),A({name:"",price:"",category:"",description:"",image:null,isNewArrival:!1})}catch(t){b(t.message)}finally{C(!1)}},style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,d.jsx)("input",{name:"name",value:k.name,onChange:J,placeholder:"Product Name",style:K.formInput,required:!0}),(0,d.jsx)("input",{name:"price",value:k.price,onChange:J,placeholder:"Price",type:"number",step:"0.01",style:K.formInput,required:!0}),(0,d.jsx)("textarea",{name:"description",value:k.description,onChange:J,placeholder:"Description",style:(0,i.A)((0,i.A)({},K.formInput),{},{minHeight:"80px",resize:"vertical"})}),(0,d.jsxs)("select",{name:"category",value:k.category,onChange:J,style:K.formSelect,required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select Category"}),(0,d.jsx)("option",{value:"Men",children:"Men"}),(0,d.jsx)("option",{value:"Women",children:"Women"}),(0,d.jsx)("option",{value:"Boys",children:"Boys"}),(0,d.jsx)("option",{value:"Footwear",children:"Footwear"}),(0,d.jsx)("option",{value:"Dresses",children:"Dresses"}),(0,d.jsx)("option",{value:"Suits",children:"Suits"}),(0,d.jsx)("option",{value:"Accessories",children:"Accessories"}),(0,d.jsx)("option",{value:"Casual",children:"Casual"}),(0,d.jsx)("option",{value:"Official",children:"Official"}),(0,d.jsx)("option",{value:"Outdoor",children:"Outdoor"})]}),(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1.5rem"},children:[(0,d.jsx)("button",{type:"submit",style:K.button,disabled:w,children:"Save Changes"}),(0,d.jsx)("button",{type:"button",onClick:()=>S(null),style:(0,i.A)((0,i.A)({},K.button),{},{background:"#ccc"}),children:"Cancel"})]}),j&&(0,d.jsx)("div",{style:{color:"red",marginTop:12},children:j})]})]})})]})}),(0,d.jsx)(o.qh,{path:"bestpicks",element:(0,d.jsxs)("div",{style:K.section,children:[(0,d.jsx)("h2",{style:K.sectionHeader,children:"Sabor Best Picks Management"}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),I(!0),W("");try{const e=new FormData;e.append("name",z.name),e.append("price",z.price),e.append("category",z.category),e.append("description",z.description),z.image&&e.append("image",z.image);const t=await(0,s.$)("/api/best-picks",{method:"POST",body:e});F(e=>[t,...e]),window.dispatchEvent(new Event("bestPicksUpdated")),P({name:"",price:"",category:"",description:"",image:null}),B(null)}catch(t){W(t.message)}finally{I(!1)}},style:{marginBottom:24,display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},encType:"multipart/form-data",children:[(0,d.jsx)("input",{name:"name",value:z.name,onChange:Y,placeholder:"Product Name",style:K.formInput,required:!0}),(0,d.jsx)("input",{name:"price",value:z.price,onChange:Y,placeholder:"Price",type:"number",step:"0.01",style:K.formInput,required:!0}),(0,d.jsx)("input",{name:"description",value:z.description,onChange:Y,placeholder:"Description",style:(0,i.A)((0,i.A)({},K.formInput),{},{gridColumn:"1 / -1"})}),(0,d.jsxs)("select",{name:"category",value:z.category,onChange:Y,style:K.formSelect,required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select Category"}),(0,d.jsx)("option",{value:"Men",children:"Men"}),(0,d.jsx)("option",{value:"Women",children:"Women"}),(0,d.jsx)("option",{value:"Boys",children:"Boys"}),(0,d.jsx)("option",{value:"Footwear",children:"Footwear"}),(0,d.jsx)("option",{value:"Dresses",children:"Dresses"}),(0,d.jsx)("option",{value:"Suits",children:"Suits"}),(0,d.jsx)("option",{value:"Accessories",children:"Accessories"}),(0,d.jsx)("option",{value:"Casual",children:"Casual"}),(0,d.jsx)("option",{value:"Official",children:"Official"}),(0,d.jsx)("option",{value:"Outdoor",children:"Outdoor"})]}),(0,d.jsx)("input",{name:"image",type:"file",accept:"image/*",onChange:Y,style:K.formInput,required:!0}),T&&(0,d.jsx)("img",{src:T,alt:"Preview",style:{maxHeight:80,borderRadius:4,gridColumn:"1 / -1",alignSelf:"flex-start"}}),(0,d.jsx)("button",{type:"submit",style:(0,i.A)((0,i.A)({},K.button),{},{gridColumn:"1 / -1"}),disabled:E,children:"Add Best Pick"})]}),O&&(0,d.jsx)("div",{style:{color:"red",marginBottom:12},children:O}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:D.map(e=>(0,d.jsxs)("div",{style:(0,i.A)((0,i.A)({},K.card),{},{textAlign:"center"}),children:[(0,d.jsx)("img",{src:e.image,alt:e.name,style:{width:"100%",height:120,objectFit:"cover",borderRadius:8,marginBottom:8}}),(0,d.jsx)("strong",{children:e.name}),(0,d.jsx)("button",{style:(0,i.A)((0,i.A)({},K.button),{},{background:"#c00",color:"#fff",marginTop:10,width:"100%"}),onClick:()=>(async e=>{if(window.confirm("Delete this best pick?")){W("");try{await(0,s.$)("/api/best-picks/".concat(e),{method:"DELETE"}),F(t=>t.filter(t=>t._id!==e)),window.dispatchEvent(new Event("bestPicksUpdated"))}catch(t){W(t.message)}}})(e._id),children:"Delete"})]},e._id))})]})}),(0,d.jsx)(o.qh,{path:"orders",element:(0,d.jsxs)("div",{style:K.section,children:[(0,d.jsx)("h2",{style:K.sectionHeader,children:"Order Management"}),q&&(0,d.jsx)("div",{style:{color:"red",marginBottom:12},children:q}),H?(0,d.jsx)("div",{children:"Loading orders..."}):0===_.length?(0,d.jsx)("div",{style:{textAlign:"center",color:"#888",padding:"2rem 0"},children:"No orders found."}):(0,d.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:16},children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{style:{borderBottom:"1px solid ".concat("light"===n?"#eee":"#555")},children:[(0,d.jsx)("th",{style:{padding:8},children:(0,d.jsx)("input",{type:"checkbox",checked:R.length===_.length&&_.length>0,onChange:e=>{e.target.checked?L(_.map(e=>e._id)):L([])}})}),(0,d.jsx)("th",{style:{padding:8,textAlign:"left"},children:"Customer"}),(0,d.jsx)("th",{style:{padding:8,textAlign:"left"},children:"Phone"}),(0,d.jsx)("th",{style:{padding:8,textAlign:"left"},children:"Date"}),(0,d.jsx)("th",{style:{padding:8,textAlign:"left"},children:"Total"}),(0,d.jsx)("th",{style:{padding:8,textAlign:"left"},children:"Status"}),(0,d.jsx)("th",{style:{padding:8,textAlign:"left"},children:R.length>0&&(0,d.jsx)("button",{title:"Delete selected orders",style:{background:"none",border:"none",color:"#c00",cursor:"pointer",fontSize:20},onClick:async()=>{if(window.confirm("Are you sure you want to delete all selected orders? This cannot be undone."))try{await Promise.all(R.map(e=>(0,s.$)("/api/orders/".concat(e),{method:"DELETE"}))),$(null),L([]),await G(),alert("Selected orders deleted successfully!")}catch(e){$(e.message||"Failed to delete selected orders")}},children:(0,d.jsx)("span",{role:"img","aria-label":"Delete",children:"\ud83d\uddd1\ufe0f"})})})]})}),(0,d.jsx)("tbody",{children:_.map(e=>{var t,n,r;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{style:{padding:8},children:(0,d.jsx)("input",{type:"checkbox",checked:R.includes(e._id),onChange:()=>{return t=e._id,void L(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}})}),(0,d.jsxs)("td",{style:{padding:8},children:[(null===(t=e.customer)||void 0===t?void 0:t.name)||"N/A",(0,d.jsx)("br",{}),(0,d.jsx)("small",{children:null===(n=e.customer)||void 0===n?void 0:n.email})]}),(0,d.jsx)("td",{style:{padding:8},children:(null===(r=e.customer)||void 0===r?void 0:r.phone)||""}),(0,d.jsx)("td",{style:{padding:8},children:new Date(e.createdAt||e.date).toLocaleDateString()}),(0,d.jsxs)("td",{style:{padding:8},children:["TZS ",e.total.toLocaleString()]}),(0,d.jsx)("td",{style:{padding:8},children:e.status}),(0,d.jsxs)("td",{style:{padding:8,display:"flex",gap:"0.5rem",alignItems:"center"},children:["Delivered"!==e.status&&"Cancelled"!==e.status&&(0,d.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:["Confirmed"!==e.status&&(0,d.jsx)("button",{style:(0,i.A)((0,i.A)({},K.button),{},{background:"#5cb85c",color:"#fff",padding:"0.4em 0.8em",fontSize:"0.9rem"}),onClick:()=>Q(e._id,"Confirmed"),children:"Confirm"}),(0,d.jsx)("button",{style:(0,i.A)((0,i.A)({},K.button),{},{background:"#f0ad4e",color:"#fff",padding:"0.4em 0.8em",fontSize:"0.9rem"}),onClick:()=>Q(e._id,"Cancelled"),children:"Cancel"})]}),(0,d.jsx)("button",{title:"Delete order",style:{background:"none",border:"none",color:"#c00",cursor:"pointer",fontSize:18},onClick:async()=>{if(window.confirm("Are you sure you want to delete this order? This cannot be undone."))try{await(0,s.$)("/api/orders/".concat(e._id),{method:"DELETE"}),N(t=>t.filter(t=>t._id!==e._id)),setTimeout(()=>{G()},300),alert("Order deleted successfully!")}catch(t){$(t.message||"Failed to delete order"),console.error("Delete order exception:",t)}},children:"\ud83d\uddd1"})]})]},e._id)})})]})]})}),(0,d.jsx)(o.qh,{path:"*",element:(0,d.jsx)(o.C5,{to:"/admin/dashboard",replace:!0})})]})]})}),(0,d.jsx)("style",{children:"\n        .admin-page {\n          display: flex;\n          min-height: 100vh;\n          background: ".concat("light"===n?"#f7f7f7":"#222",";\n          color: ").concat("light"===n?"#222":"#f7f7f7",";\n        }\n        .sidebar {\n          width: 220px;\n          background: ").concat("light"===n?"#fff":"#333",";\n          border-right: 1px solid ").concat("light"===n?"#eee":"#444",";\n          transition: width 0.3s, left 0.3s;\n          position: fixed;\n          left: -220px;\n          top: 0;\n          bottom: 0;\n          z-index: 100;\n          display: flex;\n          flex-direction: column;\n          justify-content: space-between;\n          padding: 0 0.5rem;\n        }\n        .sidebar.open {\n          left: 0;\n        }\n        .sidebar-header {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          padding: 1.5rem 1rem;\n          border-bottom: 1px solid ").concat("light"===n?"#eee":"#444",";\n        }\n        .sidebar-username {\n          font-weight: 700;\n          font-size: 1.1rem;\n        }\n        .sidebar-nav ul {\n          list-style: none;\n          padding: 0;\n          margin: 1rem 0;\n        }\n        .sidebar-nav a {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          padding: 0.8rem 1rem;\n          border-radius: 8px;\n          text-decoration: none;\n          color: ").concat("light"===n?"#333":"#ccc",";\n          font-weight: 600;\n          transition: background 0.2s, color 0.2s;\n        }\n        .sidebar-nav a:hover {\n          background: #FFD70022;\n          color: #FFD700;\n        }\n        .sidebar-nav a.active {\n          background: #FFD700;\n          color: #222;\n        }\n        .sidebar-footer {\n          padding: 1rem;\n          border-top: 1px solid ").concat("light"===n?"#eee":"#444",";\n          display: flex;\n          flex-direction: column;\n          gap: 0.5rem;\n        }\n        .theme-toggle, .logout-btn {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          width: 100%;\n          padding: 0.6rem;\n          border-radius: 8px;\n          border: 1px solid transparent;\n          font-weight: 600;\n          cursor: pointer;\n        }\n        .theme-toggle {\n          background: ").concat("light"===n?"#eee":"#444",";\n          color: ").concat("light"===n?"#333":"#ccc",";\n        }\n        .logout-btn {\n          background: #c002;\n          color: #c00;\n        }\n        .admin-content {\n          flex: 1;\n          margin-left: 0;\n          padding: 2rem;\n          transition: margin-left 0.3s;\n        }\n        @media (min-width: 769px) {\n          .admin-content {\n            margin-left: ").concat(u?"220px":"0",";\n          }\n        }\n        .hamburger {\n          position: fixed;\n          top: 1rem;\n          left: 1rem;\n          z-index: 101;\n          background: #333;\n          border: 1px solid #FFD700;\n          border-radius: 8px;\n          padding: 0.5rem;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          color: #FFD700;\n          transition: background 0.2s;\n        }\n        .hamburger:hover {\n          background: #FFD70022;\n        }\n        @media (min-width: 769px) {\n          .hamburger {\n            display: none;\n          }\n        }\n      ")})]}):(0,d.jsxs)("div",{style:{textAlign:"center",padding:"3rem"},children:[(0,d.jsx)("h2",{children:"Admin Access Required"}),(0,d.jsxs)("p",{children:["Please ",(0,d.jsx)("a",{href:"/login",children:"log in"})," as an administrator."]})]})}},862:(e,t,n)=>{n.d(t,{$:()=>o});var i=n(555);const r="https://clothing-site-backend.onrender.com";async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await fetch("".concat(r).concat(e),(0,i.A)({credentials:"include"},t));if(!n.ok)try{const e=await n.json(),t=new Error(e.message||"API error: ".concat(n.status));throw t.data=e,t}catch(o){throw new Error("API error: ".concat(n.status))}return n.json()}}}]);
//# sourceMappingURL=624.96decb72.chunk.js.map