{"version":3,"file":"static/js/115.27dbd1f5.chunk.js","mappings":"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","sources":["pages/Order.js"],"sourcesContent":["import React from 'react';\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\n\nconst styles = {\n  container: { maxWidth: 700, margin: '2rem auto', background: '#fff', borderRadius: 16, boxShadow: '0 8px 32px rgba(0,0,0,0.08)', padding: '2rem' },\n  title: { color: '#FFD700', fontWeight: 800, fontSize: '1.6rem', marginBottom: 18, textAlign: 'center' },\n  sectionTitle: { fontWeight: 700, fontSize: '1.1rem', marginBottom: 8 },\n  itemsList: { listStyle: 'none', padding: 0, marginBottom: 12 },\n  itemRow: { display: 'flex', alignItems: 'center', gap: 16, marginBottom: 10 },\n  itemImage: { width: 48, height: 48, objectFit: 'cover', borderRadius: 8 },\n  itemName: { fontWeight: 700, fontSize: '1rem', color: '#222' },\n  itemMeta: { color: '#555', fontSize: '0.95rem' },\n  price: { color: '#FFD700', fontWeight: 700 },\n  total: { fontWeight: 800, fontSize: '1.1rem', color: '#232F3E', textAlign: 'right' },\n  label: { fontWeight: 700, color: '#222', marginBottom: 6 },\n  statusWrap: { marginTop: 24, fontWeight: 700, color: '#232F3E', fontSize: '1.1rem' },\n  statusVal: { color: '#FFD700' },\n  center: { padding: 40, textAlign: 'center' },\n  error: { padding: 40, textAlign: 'center', color: 'red' },\n  breadcrumb: { textAlign: 'center', marginBottom: 8, color: '#555' },\n  stepsWrap: { display: 'flex', alignItems: 'center', justifyContent: 'space-between', margin: '1.5rem 0' },\n  stepCol: { flex: 1, textAlign: 'center', position: 'relative' },\n  stepBar: (active) => ({ height: 8, background: active ? '#FFD700' : '#eee', borderRadius: 4, margin: '0 8px' }),\n  stepLabel: (active) => ({ marginTop: 8, fontWeight: active ? 800 : 600, color: active ? '#232F3E' : '#8a8a8a' }),\n  backBtn: { marginTop: 12, background: '#eee', border: '1px solid #ddd', padding: '0.5rem 0.9rem', borderRadius: 8, cursor: 'pointer' },\n};\n\nconst formatCurrency = (amount, currency = 'TZS') => {\n  try {\n    const value = Number(amount || 0);\n    return new Intl.NumberFormat(undefined, { style: 'currency', currency }).format(value);\n  } catch {\n    return `${currency} ${amount ?? 0}`;\n  }\n};\n\nexport default function Order() {\n  const { orderId } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const initialOrder = location.state?.order || null;\n  const [order, setOrder] = React.useState(initialOrder);\n  const [loading, setLoading] = React.useState(!initialOrder);\n  const [error, setError] = React.useState(null);\n\n  React.useEffect(() => {\n    if (order) return; // Already have order from navigation state\n\n    const token = localStorage.getItem('token');\n    if (!token) {\n      setError('You must be logged in to view this order.');\n      setLoading(false);\n  navigate('/login', { replace: true });\n      return;\n    }\n\n    const controller = new AbortController();\n    (async () => {\n      try {\n        const res = await fetch(`/api/orders/${orderId}`, {\n          headers: { Authorization: `Bearer ${token}` },\n          signal: controller.signal,\n        });\n        if (res.status === 401 || res.status === 403) {\n          localStorage.removeItem('token');\n          setError('Your session has expired. Please log in again.');\n          setLoading(false);\n          navigate('/login', { replace: true });\n          return;\n        }\n        if (!res.ok) throw new Error(`Failed to fetch order (${res.status})`);\n        const data = await res.json();\n        setOrder(data || null);\n      } catch (e) {\n        if (e.name !== 'AbortError') setError(e.message || 'Failed to load order');\n      } finally {\n        setLoading(false);\n      }\n    })();\n\n    return () => controller.abort();\n  }, [order, orderId, navigate]);\n\n  if (loading) return <div style={styles.center}>Loading order...</div>;\n  if (error) return <div style={styles.error}>{error}</div>;\n  if (!order) return <div style={styles.center}>No order found.</div>;\n\n  const steps = ['Pending', 'Confirmed', 'Delivered'];\n  const status = (order.status || 'Pending').toString();\n  const current = Math.max(0, steps.findIndex(s => s.toLowerCase() === status.toLowerCase()));\n  const items = Array.isArray(order.items) ? order.items : [];\n\n  return (\n    <div style={styles.container}>\n      <div style={styles.breadcrumb}>Order #{order._id || order.id}</div>\n      <h2 style={styles.title}>Order Tracking</h2>\n\n      {/* Tracking steps */}\n      <div style={styles.stepsWrap}>\n        {steps.map((label, idx) => (\n          <div key={label} style={styles.stepCol}>\n            <div style={styles.stepBar(idx <= current)} />\n            <div style={styles.stepLabel(idx <= current)}>{label}</div>\n          </div>\n        ))}\n      </div>\n\n      <div style={{ marginBottom: 24 }}>\n        <div style={styles.sectionTitle}>Items</div>\n        <ul style={styles.itemsList}>\n          {items.map((item, idx) => (\n            <li key={item._id || item.id || idx} style={styles.itemRow}>\n              {item.image ? (\n                <img src={item.image} alt={item.name} style={styles.itemImage} />\n              ) : (\n                <div style={{ ...styles.itemImage, background: '#f1f1f1' }} />\n              )}\n              <div style={{ flex: 1 }}>\n                <div style={styles.itemName}>{item.name}</div>\n                <div style={styles.itemMeta}>Size: {item.size || '-'}</div>\n                <div style={styles.price}>{formatCurrency(item.price, order.currency || 'TZS')}</div>\n              </div>\n              <div>x{item.quantity}</div>\n            </li>\n          ))}\n        </ul>\n        <div style={styles.total}>Total: {formatCurrency(order.total, order.currency || 'TZS')}</div>\n      </div>\n\n      <div style={{ marginBottom: 16 }}>\n        <div style={styles.label}>Delivery Address</div>\n        <div>{order.customer?.address || '-'}</div>\n      </div>\n      <div style={{ marginBottom: 16 }}>\n        <div style={styles.label}>Phone Number</div>\n        <div>{order.customer?.phone || '-'}</div>\n      </div>\n      <div style={styles.statusWrap}>\n        Order Status: <span style={styles.statusVal}>{order.status || 'Pending'}</span>\n      </div>\n\n      <div style={{ textAlign: 'center' }}>\n        <button onClick={() => navigate(-1)} style={styles.backBtn}>Back</button>\n      </div>\n    </div>\n  );\n}\n"],"names":["styles","container","maxWidth","margin","background","borderRadius","boxShadow","padding","title","color","fontWeight","fontSize","marginBottom","textAlign","sectionTitle","itemsList","listStyle","itemRow","display","alignItems","gap","itemImage","width","height","objectFit","itemName","itemMeta","price","total","label","statusWrap","marginTop","statusVal","center","error","breadcrumb","stepsWrap","justifyContent","stepCol","flex","position","stepBar","active","stepLabel","backBtn","border","cursor","formatCurrency","amount","currency","arguments","length","undefined","value","Number","Intl","NumberFormat","style","format","_unused","concat","Order","_location$state","_order$customer","_order$customer2","orderId","useParams","location","useLocation","navigate","useNavigate","initialOrder","state","order","setOrder","React","loading","setLoading","setError","token","localStorage","getItem","replace","controller","AbortController","res","fetch","headers","Authorization","signal","status","removeItem","ok","Error","data","json","e","name","message","abort","_jsx","children","steps","toString","current","Math","max","findIndex","s","toLowerCase","items","Array","isArray","_jsxs","_id","id","map","idx","item","image","src","alt","_objectSpread","size","quantity","customer","address","phone","onClick"],"sourceRoot":""}