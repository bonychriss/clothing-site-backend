"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[679],{679:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var i=r(555),n=r(43),o=r(60),s=r(862),a=r(579);const l=function(e){let{cart:t,onClose:r,onRemove:i}=e;const o="undefined"!==typeof window&&localStorage.getItem("currency")||"TZS",[s,l]=n.useState(2600),[d,c]=n.useState(!1);return n.useEffect(()=>{c(!0),fetch("https://api.exchangerate.host/latest?base=TZS&symbols=USD").then(e=>e.json()).then(e=>{e&&e.rates&&e.rates.USD&&l(1/e.rates.USD),c(!1)}).catch(()=>c(!1))},[]),(0,a.jsxs)("div",{style:{position:"fixed",top:0,right:0,width:"350px",height:"100vh",background:"#fff",boxShadow:"-2px 0 16px #2222",zIndex:10002,padding:"2rem 1.5rem",display:"flex",flexDirection:"column"},children:[(0,a.jsx)("button",{onClick:r,style:{alignSelf:"flex-end",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#222"},children:"\xd7"}),(0,a.jsx)("h2",{style:{fontWeight:700,fontSize:"1.3rem",marginBottom:"1.5rem",color:"#FFD700"},children:"Your Cart"}),0===t.length?(0,a.jsx)("div",{style:{color:"#888",textAlign:"center",marginTop:"2rem"},children:"Your cart is empty."}):(0,a.jsx)("div",{style:{flex:1,overflowY:"auto"},children:t.map((e,t)=>{return(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"1.2rem",borderBottom:"1px solid #eee",paddingBottom:"1rem"},children:[(0,a.jsx)("img",{src:e.image,alt:e.name,style:{width:60,height:60,objectFit:"cover",borderRadius:8,marginRight:16}}),(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsx)("div",{style:{fontWeight:600},children:e.name}),(0,a.jsx)("div",{style:{color:"#232F3E",fontWeight:700,fontSize:"1rem"},children:e.price?(r=e.price,"USD"===o?d?"Loading USD rate...":"$".concat((r/s).toFixed(2)):"TZS ".concat(r)):"TZS 9,900"})]}),(0,a.jsx)("button",{onClick:()=>i(t),style:{background:"none",border:"none",color:"#FF9900",fontWeight:700,fontSize:"1.2rem",cursor:"pointer"},children:"Remove"})]},t);var r})}),(0,a.jsx)("button",{style:{background:"#FFD700",color:"#222",border:"none",borderRadius:6,padding:"0.8rem 0",fontWeight:700,fontSize:"1.1rem",marginTop:"2rem",cursor:"pointer"},children:"Checkout"})]})};function d(e){let{src:t,alt:r,lqip:i}=e;const[o,s]=n.useState(!0),[l,d]=n.useState(!1);return(0,a.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[o&&i&&(0,a.jsx)("img",{src:i,alt:r+" placeholder",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",filter:"blur(12px)",transition:"opacity 0.3s",opacity:o?1:0,borderRadius:"0.75rem",zIndex:1}}),(0,a.jsx)("img",{src:l?"/images/placeholder.png":t,alt:r,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"0.75rem",display:"block",transition:"opacity 0.3s",opacity:o?0:1,position:"relative",zIndex:2},onLoad:()=>s(!1),onError:()=>{d(!0),s(!1)}})]})}const c=e=>{let{value:t,onChange:r,size:i="1.1rem"}=e;return(0,a.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[1,2,3,4,5].map(e=>(0,a.jsx)("span",{onClick:r?()=>r(e):void 0,"aria-label":"Rate ".concat(e," star").concat(e>1?"s":""),style:{background:"none",border:"none",cursor:r?"pointer":"default",lineHeight:1,padding:0,color:e<=Math.round(t)?"#FFA41C":"#ccc",fontSize:i,userSelect:"none"},role:r?"button":void 0,tabIndex:r?0:void 0,children:e<=Math.round(t)?"\u2605":"\u2606"},e))})};const p=function(){var e;const[t]=(0,n.useState)(""),[r,p]=(0,n.useState)([]),[u,g]=(0,n.useState)([]),[m,h]=(0,n.useState)(!1),[x,f]=(0,n.useState)({}),[v,b]=(0,n.useState)("TZS"),[y,S]=(0,n.useState)(2600),[j,w]=(0,n.useState)(!1),k=(0,o.Zp)(),C=(0,o.zy)(),F=new URLSearchParams(C.search),z=(null===(e=F.get("search"))||void 0===e?void 0:e.toLowerCase())||"",A=F.get("category"),R=F.get("sort"),B=!!localStorage.getItem("token");(0,n.useEffect)(()=>{w(!0),fetch("https://api.exchangerate.host/latest?base=TZS&symbols=USD").then(e=>e.json()).then(e=>{e&&e.rates&&e.rates.USD&&S(1/e.rates.USD),w(!1)}).catch(()=>w(!1))},[]);const D=e=>"USD"===v?j?"Loading USD rate...":"$".concat((e/y).toFixed(2)):"TZS ".concat(e),[I,W]=(0,n.useState)(new Set),[P,T]=(0,n.useState)(""),[L,N]=(0,n.useState)(""),[U,E]=(0,n.useState)(0),[O,Z]=(0,n.useState)(R||"featured"),[M,H]=(0,n.useState)(!1);(0,n.useEffect)(()=>{"all"===O&&W(new Set)},[O]),(0,n.useEffect)(()=>{try{const e=localStorage.getItem("productRatings");e&&f(JSON.parse(e))}catch(e){}},[]),(0,n.useEffect)(()=>{try{localStorage.setItem("productRatings",JSON.stringify(x))}catch(e){}},[x]),(0,n.useEffect)(()=>{const e=async()=>{try{const[t,r]=await Promise.all([(0,s.$)("/api/products").catch(()=>[]),(0,s.$)("/api/best-picks").catch(()=>[])]),n=(Array.isArray(r)?r:[]).map(e=>(0,i.A)((0,i.A)({},e),{},{isBestPick:!0})),o=[...Array.isArray(t)?t:[],...n],a=Array.from(new Map(o.map(e=>[e._id||e.name,e])).values());p(a);try{localStorage.setItem("backendProducts",JSON.stringify(a))}catch(e){}}catch(t){p([])}};return e(),window.addEventListener("productsUpdated",e),()=>window.removeEventListener("productsUpdated",e)},[]);const $=(0,n.useMemo)(()=>{const e=new Set((r||[]).map(e=>e.category||"General"));return Array.from(e)},[r]);(0,n.useEffect)(()=>{if(!A)return;const e=A.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean);if(!e.length)return;const t=new Map($.map(e=>[String(e).toLowerCase(),e])),r=e.map(e=>t.get(e)||e);W(new Set(r))},[A,$]);const q=e=>{let t=e;z&&(t=t.filter(e=>{var t,r,i,n;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(z))||(null===(r=e.category)||void 0===r?void 0:r.toLowerCase().includes(z))||(null===(i=e.desc)||void 0===i?void 0:i.toLowerCase().includes(z))||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(z))})),I.size&&(t=t.filter(e=>I.has(e.category||"General")));const r=""!==P?Number(P):-1/0,i=""!==L?Number(L):1/0;return t=t.filter(e=>{var t,n;return(null!==(t=e.price)&&void 0!==t?t:0)>=r&&(null!==(n=e.price)&&void 0!==n?n:0)<=i}),t=t.filter(e=>{var t,r;return(null!==(t=null!==(r=x[e._id||e.id||e.name])&&void 0!==r?r:e.rating)&&void 0!==t?t:4)>=U}),t},_=e=>{const t=[...e];switch(O){case"all":break;case"new-arrivals":t.sort((e,t)=>(t.isNewArrival?1:0)-(e.isNewArrival?1:0));break;case"price-asc":t.sort((e,t)=>{var r,i;return(null!==(r=e.price)&&void 0!==r?r:0)-(null!==(i=t.price)&&void 0!==i?i:0)});break;case"price-desc":t.sort((e,t)=>{var r,i;return(null!==(r=t.price)&&void 0!==r?r:0)-(null!==(i=e.price)&&void 0!==i?i:0)});break;case"rating":{const e=e=>{var t,r;return null!==(t=null!==(r=x[e._id||e.id||e.name])&&void 0!==r?r:e.rating)&&void 0!==t?t:0};t.sort((t,r)=>e(r)-e(t));break}case"reviews":t.sort((e,t)=>{var r,i;return(null!==(r=t.reviews)&&void 0!==r?r:0)-(null!==(i=e.reviews)&&void 0!==i?i:0)});break;default:t.sort((e,t)=>(t.isBestSeller||t.isOverallPick?1:0)-(e.isBestSeller||e.isOverallPick?1:0))}return t},J=(0,n.useMemo)(()=>{const e=q(r);return _(e)},[r,q,_]),Y={fontWeight:700,margin:"0.25rem 0 0.5rem",color:"#111"},G={display:"flex",alignItems:"center",gap:8,margin:"0.35rem 0"};return(0,a.jsxs)("div",{className:"products products-page",style:{maxWidth:"none",width:"100%",margin:"0",padding:"0 2rem 2rem 0",boxSizing:"border-box",display:"block"},children:[t&&(0,a.jsx)("div",{style:{position:"fixed",top:80,right:30,zIndex:9999,background:"#FFD700",color:"#222",padding:"1rem 2rem",borderRadius:12,boxShadow:"0 2px 12px #0002",fontWeight:700,fontSize:"1.1rem"},children:t}),(0,a.jsx)("h1",{style:{color:"#222",fontWeight:800,fontSize:"2.2rem",margin:"2rem 0 1.5rem 0",textAlign:"center"},children:"Products"}),(0,a.jsx)("div",{style:{width:"100%",background:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",padding:"1rem 0",marginBottom:"0.5rem"},children:(0,a.jsx)("div",{style:{maxWidth:1100,margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"flex-end"},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,a.jsx)("label",{htmlFor:"currency",style:{fontWeight:600},children:"Currency:"}),(0,a.jsxs)("select",{id:"currency",value:v,onChange:e=>{b(e.target.value),"undefined"!==typeof window&&localStorage.setItem("currency",e.target.value)},style:{padding:"0.4em 1em",borderRadius:8,border:"1px solid #FFD700",fontWeight:600},children:[(0,a.jsx)("option",{value:"TZS",children:"TZS (Tanzanian Shilling)"}),(0,a.jsx)("option",{value:"USD",children:"USD (Dollar)"})]})]})})}),(0,a.jsx)("div",{className:"mobile-filter-toggle",style:{marginBottom:"1rem"},children:(0,a.jsxs)("button",{onClick:()=>H(!M),style:{background:"#FFD700",color:"#222",border:"none",borderRadius:8,padding:"0.6rem 1.2rem",fontWeight:700,fontSize:"1rem",cursor:"pointer",width:"100%"},children:[M?"Hide":"Show"," Filters"]})}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",padding:"0.75rem 0"},children:[(0,a.jsxs)("div",{style:{color:"#555"},children:[J.length," items"]}),(0,a.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)("span",{style:{color:"#333",fontWeight:600},children:"Sort by:"}),(0,a.jsxs)("select",{value:O,onChange:e=>Z(e.target.value),style:{padding:"0.4rem 0.6rem",borderRadius:8,border:"1px solid #ddd"},children:[(0,a.jsx)("option",{value:"all",children:"All Products"}),(0,a.jsx)("option",{value:"new-arrivals",children:"New Arrivals"}),(0,a.jsx)("option",{value:"featured",children:"Featured"}),(0,a.jsx)("option",{value:"price-asc",children:"Price: Low to High"}),(0,a.jsx)("option",{value:"price-desc",children:"Price: High to Low"}),(0,a.jsx)("option",{value:"rating",children:"Rating"}),(0,a.jsx)("option",{value:"reviews",children:"Reviews"})]})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"260px 1fr",gap:"2rem"},className:"products-layout-responsive",children:[(0,a.jsxs)("aside",{className:"products-sidebar ".concat(M?"mobile-visible":""),style:{position:"sticky",top:16,alignSelf:"start",background:"#fff",border:"1px solid #eee",borderRadius:12,padding:"1rem",boxShadow:"0 2px 12px rgba(0,0,0,0.04)",display:"block"},children:[(0,a.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,a.jsx)("div",{style:Y,children:"Departments"}),$.map(e=>(0,a.jsxs)("label",{style:G,children:[(0,a.jsx)("input",{type:"checkbox",checked:I.has(e),onChange:()=>(e=>{const t=new Set(I);t.has(e)?t.delete(e):t.add(e),W(t)})(e),style:{accentColor:"#FFD700"}}),(0,a.jsx)("span",{style:{color:"#333"},children:e})]},e))]}),(0,a.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,a.jsx)("div",{style:Y,children:"Customer Reviews"}),[4,3,2,1].map(e=>(0,a.jsxs)("button",{onClick:()=>E(e),style:(0,i.A)((0,i.A)({},G),{},{background:"none",border:"none",cursor:"pointer",color:U===e?"#111":"#444"}),children:[(0,a.jsx)(c,{value:e,size:"1rem"}),(0,a.jsx)("span",{children:"\xa0& Up"})]},e)),U>0&&(0,a.jsx)("button",{onClick:()=>E(0),style:{marginTop:6,background:"none",border:"none",color:"#FF9900",cursor:"pointer",fontWeight:700},children:"Clear rating"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:Y,children:"Price"}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)("input",{type:"number",placeholder:"Min",value:P,onChange:e=>T(e.target.value),style:{width:90,padding:"0.4rem",borderRadius:8,border:"1px solid #ddd"}}),(0,a.jsx)("span",{children:"\u2014"}),(0,a.jsx)("input",{type:"number",placeholder:"Max",value:L,onChange:e=>N(e.target.value),style:{width:90,padding:"0.4rem",borderRadius:8,border:"1px solid #ddd"}})]}),(""!==P||""!==L)&&(0,a.jsx)("button",{onClick:()=>{T(""),N("")},style:{marginTop:6,background:"none",border:"none",color:"#FF9900",cursor:"pointer",fontWeight:700},children:"Clear price"})]})]}),(0,a.jsx)("main",{children:(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1.5rem",minHeight:120},className:"products-grid-responsive",children:0===J.length?(0,a.jsx)("div",{style:{gridColumn:"1/-1",textAlign:"center",color:"#888",fontSize:"1.1rem",padding:"2rem 0"},children:"No products match your filters."}):J.map((e,t)=>{var r;const n=((e,t)=>e._id||e.id||String(t))(e,t),o=x[n],s=null!==(r=null!==o&&void 0!==o?o:e.rating)&&void 0!==r?r:4;return(0,a.jsxs)("div",{className:"product-card",style:{position:"relative",background:"#fff",border:"1px solid #e5e7eb",borderRadius:"1.25rem",boxShadow:"0 4px 12px rgba(0,0,0,0.04)",padding:"1.25rem",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",justifyContent:"flex-start",overflow:"hidden",minHeight:380},children:[!0===e.isNewArrival&&(0,a.jsx)("div",{style:{position:"absolute",top:"15px",right:"-30px",background:"#FFD700",color:"#222",padding:"5px 35px",fontWeight:"bold",fontSize:"12px",transform:"rotate(45deg)",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:50,letterSpacing:"1px",textShadow:"0 1px 2px #fff8",whiteSpace:"nowrap",pointerEvents:"none",userSelect:"none"},children:"NEW ARRIVAL"}),e.inStock&&e.isBestSeller&&(0,a.jsx)("span",{style:{position:"absolute",top:12,left:12,background:"#FF9900",color:"#fff",fontWeight:700,fontSize:"0.8rem",borderRadius:6,padding:"2px 8px"},children:"Best Seller"}),!e.inStock&&!e.isBestSeller&&!e.isOverallPick&&!e.isBestPick&&"Sabor Best Picks"!==e.category&&(0,a.jsx)("div",{style:{position:"absolute",top:"15px",right:"-30px",background:"#e74c3c",color:"white",padding:"5px 35px",fontWeight:"bold",fontSize:"12px",transform:"rotate(45deg)",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:10},children:"SOLD OUT"}),e.inStock&&e.isOverallPick&&(0,a.jsx)("span",{style:{position:"absolute",top:12,right:12,background:"#232F3E",color:"#fff",fontWeight:700,fontSize:"0.8rem",borderRadius:6,padding:"2px 8px"},children:"Overall Pick"}),(0,a.jsx)("div",{style:{width:"100%",height:220,marginBottom:"1rem",overflow:"hidden",borderRadius:"0.75rem",position:"relative"},children:(0,a.jsx)(d,{src:e.image,alt:e.name,lqip:e.lqip})}),(0,a.jsx)("div",{style:{width:"100%",marginBottom:6,fontSize:"1rem",fontWeight:700,color:"#111",textAlign:"center",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.name}),(0,a.jsx)("div",{style:{width:"100%",color:"#333",fontSize:"0.95rem",lineHeight:1.4,marginBottom:8,textAlign:"center"},children:e.description||e.desc||"Premium quality at a great price."}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:6},children:[(0,a.jsx)(c,{value:s,onChange:e=>f((0,i.A)((0,i.A)({},x),{},{[n]:e}))}),(0,a.jsx)("span",{style:{fontSize:"0.9rem",color:"#555"},children:e.reviews?e.reviews.toLocaleString():"1,000+"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"center",gap:8,marginTop:4},children:[(0,a.jsx)("div",{style:{fontWeight:800,fontSize:"1.15rem",color:"#FFD700"},children:e.price?D(e.price):"TZS 9,900"}),e.listPrice&&(0,a.jsx)("div",{style:{color:"#777",textDecoration:"line-through",fontSize:"0.95rem"},children:D(e.listPrice)})]}),(0,a.jsx)("div",{style:{width:"100%",marginTop:8},children:(0,a.jsx)("button",{type:"button",style:{background:"#FFD700",color:"#222",border:"none",borderRadius:8,padding:"0.5rem 1.2rem",fontWeight:700,width:"100%",maxWidth:180,cursor:e.inStock||e.isBestPick?"pointer":"not-allowed",marginBottom:6,opacity:e.inStock||e.isBestPick?1:.6},"aria-label":"Add to cart",disabled:!e.inStock&&!e.isBestPick,onClick:()=>{(e.inStock||e.isBestPick)&&(e=>{B?k("/select-size",{state:{product:e}}):k("/register")})(e)},children:e.inStock||e.isBestPick?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"fas fa-shopping-cart",style:{marginRight:"8px"}}),(0,a.jsx)("span",{children:"Add to Cart"})]}):(0,a.jsx)("span",{children:"Out of Stock"})})})]},n)})})})]}),m&&(0,a.jsx)(l,{cart:u,onClose:()=>h(!1),onRemove:e=>g(u.filter((t,r)=>r!==e))}),(0,a.jsx)("style",{children:"\n        .products.products-page {\n          padding: 0 2rem 2rem 2rem !important;\n        }\n        .mobile-filter-toggle {\n          display: none;\n        }\n        /* Tablet and smaller desktop */\n        @media (max-width: 980px) {\n          .products-layout-responsive {\n            grid-template-columns: 1fr !important;\n          }\n          .products-sidebar {\n            display: none; /* Hide sidebar on mobile */\n            position: static;\n            margin-bottom: 1.5rem;\n          }\n          .products-sidebar.mobile-visible {\n            display: block; /* Show when toggled */\n          }\n          .mobile-filter-toggle {\n            display: block; /* Show the toggle button */\n            max-width: 600px;\n            margin: 0 auto 1rem auto;\n          }\n          .products-grid-responsive {\n            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)) !important;\n          }\n        }\n        /* Mobile phones */\n        @media (max-width: 600px) {\n          .products.products-page {\n            padding: 0 1rem 2rem 1rem !important;\n          }\n          .products-grid-responsive {\n            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)) !important;\n            gap: 1rem !important;\n          }\n        }\n      "})]})}},862:(e,t,r)=>{r.d(t,{$:()=>o});var i=r(555);const n="https://clothing-site-backend.onrender.com";async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await fetch("".concat(n).concat(e),(0,i.A)({credentials:"include"},t));if(!r.ok)try{const e=await r.json(),t=new Error(e.message||"API error: ".concat(r.status));throw t.data=e,t}catch(o){throw new Error("API error: ".concat(r.status))}return r.json()}}}]);
//# sourceMappingURL=679.ae3b9698.chunk.js.map