"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[115],{115:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var i=r(555),n=r(43),o=r(60),s=r(579);const l={container:{maxWidth:700,margin:"2rem auto",background:"#fff",borderRadius:16,boxShadow:"0 8px 32px rgba(0,0,0,0.08)",padding:"2rem"},title:{color:"#FFD700",fontWeight:800,fontSize:"1.6rem",marginBottom:18,textAlign:"center"},sectionTitle:{fontWeight:700,fontSize:"1.1rem",marginBottom:8},itemsList:{listStyle:"none",padding:0,marginBottom:12},itemRow:{display:"flex",alignItems:"center",gap:16,marginBottom:10},itemImage:{width:48,height:48,objectFit:"cover",borderRadius:8},itemName:{fontWeight:700,fontSize:"1rem",color:"#222"},itemMeta:{color:"#555",fontSize:"0.95rem"},price:{color:"#FFD700",fontWeight:700},total:{fontWeight:800,fontSize:"1.1rem",color:"#232F3E",textAlign:"right"},label:{fontWeight:700,color:"#222",marginBottom:6},statusWrap:{marginTop:24,fontWeight:700,color:"#232F3E",fontSize:"1.1rem"},statusVal:{color:"#FFD700"},center:{padding:40,textAlign:"center"},error:{padding:40,textAlign:"center",color:"red"},breadcrumb:{textAlign:"center",marginBottom:8,color:"#555"},stepsWrap:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"1.5rem 0"},stepCol:{flex:1,textAlign:"center",position:"relative"},stepBar:e=>({height:8,background:e?"#FFD700":"#eee",borderRadius:4,margin:"0 8px"}),stepLabel:e=>({marginTop:8,fontWeight:e?800:600,color:e?"#232F3E":"#8a8a8a"}),backBtn:{marginTop:12,background:"#eee",border:"1px solid #ddd",padding:"0.5rem 0.9rem",borderRadius:8,cursor:"pointer"}},a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TZS";try{const r=Number(e||0);return new Intl.NumberFormat(void 0,{style:"currency",currency:t}).format(r)}catch(r){return"".concat(t," ").concat(null!==e&&void 0!==e?e:0)}};function d(){var e,t,r;const{orderId:d}=(0,o.g)(),c=(0,o.zy)(),m=(0,o.Zp)(),g=(null===(e=c.state)||void 0===e?void 0:e.order)||null,[u,h]=n.useState(g),[x,y]=n.useState(!g),[f,p]=n.useState(null);if(n.useEffect(()=>{if(u)return;const e=localStorage.getItem("token");if(!e)return p("You must be logged in to view this order."),y(!1),void m("/login",{replace:!0});const t=new AbortController;return(async()=>{try{const r=await fetch("/api/orders/".concat(d),{headers:{Authorization:"Bearer ".concat(e)},signal:t.signal});if(401===r.status||403===r.status)return localStorage.removeItem("token"),p("Your session has expired. Please log in again."),y(!1),void m("/login",{replace:!0});if(!r.ok)throw new Error("Failed to fetch order (".concat(r.status,")"));const i=await r.json();h(i||null)}catch(r){"AbortError"!==r.name&&p(r.message||"Failed to load order")}finally{y(!1)}})(),()=>t.abort()},[u,d,m]),x)return(0,s.jsx)("div",{style:l.center,children:"Loading order..."});if(f)return(0,s.jsx)("div",{style:l.error,children:f});if(!u)return(0,s.jsx)("div",{style:l.center,children:"No order found."});const v=["Pending","Confirmed","Delivered"],j=(u.status||"Pending").toString(),b=Math.max(0,v.findIndex(e=>e.toLowerCase()===j.toLowerCase())),S=Array.isArray(u.items)?u.items:[];return(0,s.jsxs)("div",{style:l.container,children:[(0,s.jsxs)("div",{style:l.breadcrumb,children:["Order #",u._id||u.id]}),(0,s.jsx)("h2",{style:l.title,children:"Order Tracking"}),(0,s.jsx)("div",{style:l.stepsWrap,children:v.map((e,t)=>(0,s.jsxs)("div",{style:l.stepCol,children:[(0,s.jsx)("div",{style:l.stepBar(t<=b)}),(0,s.jsx)("div",{style:l.stepLabel(t<=b),children:e})]},e))}),(0,s.jsxs)("div",{style:{marginBottom:24},children:[(0,s.jsx)("div",{style:l.sectionTitle,children:"Items"}),(0,s.jsx)("ul",{style:l.itemsList,children:S.map((e,t)=>(0,s.jsxs)("li",{style:l.itemRow,children:[e.image?(0,s.jsx)("img",{src:e.image,alt:e.name,style:l.itemImage}):(0,s.jsx)("div",{style:(0,i.A)((0,i.A)({},l.itemImage),{},{background:"#f1f1f1"})}),(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsx)("div",{style:l.itemName,children:e.name}),(0,s.jsxs)("div",{style:l.itemMeta,children:["Size: ",e.size||"-"]}),(0,s.jsx)("div",{style:l.price,children:a(e.price,u.currency||"TZS")})]}),(0,s.jsxs)("div",{children:["x",e.quantity]})]},e._id||e.id||t))}),(0,s.jsxs)("div",{style:l.total,children:["Total: ",a(u.total,u.currency||"TZS")]})]}),(0,s.jsxs)("div",{style:{marginBottom:16},children:[(0,s.jsx)("div",{style:l.label,children:"Delivery Address"}),(0,s.jsx)("div",{children:(null===(t=u.customer)||void 0===t?void 0:t.address)||"-"})]}),(0,s.jsxs)("div",{style:{marginBottom:16},children:[(0,s.jsx)("div",{style:l.label,children:"Phone Number"}),(0,s.jsx)("div",{children:(null===(r=u.customer)||void 0===r?void 0:r.phone)||"-"})]}),(0,s.jsxs)("div",{style:l.statusWrap,children:["Order Status: ",(0,s.jsx)("span",{style:l.statusVal,children:u.status||"Pending"})]}),(0,s.jsx)("div",{style:{textAlign:"center"},children:(0,s.jsx)("button",{onClick:()=>m(-1),style:l.backBtn,children:"Back"})})]})}}}]);
//# sourceMappingURL=115.27dbd1f5.chunk.js.map