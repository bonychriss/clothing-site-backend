"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[534],{534:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var r=i(555),o=i(43),n=i(60),a=i(579);function s(){const[e,t]=o.useState(0),[i,r]=o.useState(0),[n,s]=o.useState(""),[d,l]=o.useState(!1);return(0,a.jsxs)("form",{onSubmit:t=>{t.preventDefault(),l(!0);let i="";try{const e=JSON.parse(localStorage.getItem("user"));i=(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.username)||""}catch(a){}const r={stars:e,comment:n,name:i},o=JSON.parse(localStorage.getItem("customerRatings")||"[]");o.push(r),localStorage.setItem("customerRatings",JSON.stringify(o)),window.dispatchEvent(new Event("customer-rating-submitted"))},style:{display:"flex",flexDirection:"column",gap:12},children:[(0,a.jsx)("div",{style:{display:"flex",alignItems:"center",gap:6,fontSize:"1.5rem",marginBottom:4},children:[1,2,3,4,5].map(o=>(0,a.jsx)("span",{style:{cursor:"pointer",color:(i||e)>=o?"#FFA41C":"#ccc",transition:"color 0.2s"},onClick:()=>t(o),onMouseEnter:()=>r(o),onMouseLeave:()=>r(0),"aria-label":"Rate ".concat(o," star").concat(o>1?"s":""),children:"\u2605"},o))}),(0,a.jsx)("textarea",{value:n,onChange:e=>s(e.target.value),placeholder:"Leave a comment...",rows:3,style:{fontFamily:"inherit",fontSize:"1rem",borderRadius:8,border:"1px solid #FFD700",padding:8,resize:"vertical",background:"#fff",color:"#222"},required:!0}),(0,a.jsx)("button",{type:"submit",style:{background:"#FFD700",color:"#232F3E",border:"none",borderRadius:8,padding:"0.6rem 1.2rem",fontWeight:700,fontSize:"1rem",cursor:"pointer",alignSelf:"flex-start"},children:"Submit Rating"}),d&&(0,a.jsx)("div",{style:{color:"#228B22",fontWeight:600,marginTop:6},children:"Thank you for your feedback!"})]})}function d(){var e,t,i,d,l;const c=(0,n.zy)(),m=(0,n.Zp)(),{product:p,selectedSize:g}=c.state||{},[x,u]=o.useState(p||{});o.useEffect(()=>{!async function(){if(null!==p&&void 0!==p&&p._id&&!p.variants)try{const e=await fetch("/api/products");if(e.ok){const t=await e.json(),i=Array.isArray(t)?t.find(e=>e.name===p.name):null;i&&u(i)}}catch(e){}}()},[p]);const[h,f]=o.useState(g||""),[y,b]=o.useState(1),v=!!localStorage.getItem("token"),[S,F]=o.useState(!1),[j,k]=o.useState([]);o.useEffect(()=>{!async function(){try{const[e,t]=await Promise.all([fetch("/api/products"),fetch("/api/best-picks")]),i=e.ok?await e.json():[],o=t.ok?await t.json():[],n=(Array.isArray(o)?o:[]).map(e=>(0,r.A)((0,r.A)({},e),{},{isBestPick:!0})),a=[...i,...n],s=Array.from(new Map(a.map(e=>[e._id||e.name,e])).values());k(s)}catch(e){console.error("Failed to fetch all products for related items:",e)}}()},[]);const z=x&&x.category?j.filter(e=>String(e.category).toLowerCase()===String(x.category).toLowerCase()&&e._id!==x._id):[];if(!p)return(0,a.jsx)("div",{style:{padding:40,textAlign:"center"},children:"No product selected."});const w=(x.variants||[]).find(e=>e.size===h);return(0,a.jsxs)("div",{className:"select-size-full",style:{minHeight:"100vh",background:"#FFF8DC",padding:"32px 0",position:"relative"},children:[(0,a.jsx)("div",{style:{position:"fixed",top:"80px",right:"40px",background:"#232F3E",color:"#FFD700",padding:"1rem 2rem",borderRadius:"10px",fontWeight:700,fontSize:"1.5rem",fontFamily:'cursive, "Segoe Script", "Brush Script MT", "Lucida Handwriting", "Apple Chancery", sans-serif',boxShadow:"0 2px 12px #0003",zIndex:9999,opacity:S?1:0,transform:S?"translateY(0)":"translateY(-30px)",transition:"opacity 0.7s, transform 0.7s",pointerEvents:"none"},children:"\ud835\udc9c\ud835\udcb9\ud835\udcb9\ud835\udc52\ud835\udcb9 \ud835\udcaf\ud835\udc5c \ud835\udc9e\ud835\udcb6\ud835\udcc7\ud835\udcc9"}),(0,a.jsxs)("div",{className:"select-size-main",style:{maxWidth:1100,margin:"0 auto",padding:"0 16px"},children:[(0,a.jsxs)("div",{className:"product-flex",style:{display:"flex",flexWrap:"wrap",gap:32,alignItems:"flex-start",marginBottom:32},children:[(0,a.jsx)("img",{src:p.image,alt:p.name,className:"product-image",style:{flex:"0 0 320px",width:"100%",maxWidth:320,height:320,objectFit:"contain",borderRadius:16,background:"#f8f8f8",boxShadow:"0 2px 12px #0001"}}),(0,a.jsxs)("div",{className:"product-details",style:{flex:"1 1 320px",minWidth:240,padding:"0 12px"},children:[(0,a.jsx)("h1",{style:{fontWeight:800,fontSize:"2rem",color:"#232F3E",marginBottom:10},children:x.name||p.name}),w?(0,a.jsxs)("div",{style:{color:"#FFD700",fontWeight:700,fontSize:"1.25rem",marginBottom:8},children:["TZS ",w.price||x.price]}):(0,a.jsxs)("div",{style:{color:"#FFD700",fontWeight:700,fontSize:"1.25rem",marginBottom:8},children:["TZS ",x.price||p.price]}),(0,a.jsx)("div",{style:{color:"#444",fontSize:"1.08rem",marginBottom:8},children:x.description||x.desc||p.description||p.desc||"Premium quality at a great price."}),p.rating&&(0,a.jsx)("div",{style:{marginBottom:8},children:(0,a.jsx)("span",{style:{color:"#FFA41C",fontSize:"1.25rem",fontWeight:600},children:Array.from({length:5}).map((e,t)=>(0,a.jsx)("span",{children:t<Math.round(p.rating)?"\u2605":"\u2606"},t))})}),(0,a.jsxs)("div",{style:{color:"#888",fontSize:"1rem",marginBottom:8},children:["Category: ",p.category]}),(0,a.jsxs)("div",{className:"customer-ratings",style:{marginTop:28,padding:"1.2rem",background:"#FFF8DC",borderRadius:10,boxShadow:"0 2px 8px #FFD70022"},children:[(0,a.jsx)("h3",{style:{fontWeight:800,fontSize:"1.3rem",color:"#111",marginBottom:10,letterSpacing:"1px",fontFamily:"Segoe UI, Arial, sans-serif",textShadow:"0 2px 8px #FFD70022"},children:"What Our Customers Say"}),(0,a.jsx)(s,{})]})]})]}),(0,a.jsxs)("div",{className:"size-section",style:{marginBottom:32},children:[(0,a.jsx)("h2",{style:{color:"#FFD700",fontWeight:800,fontSize:"1.3rem",marginBottom:18},children:"Select Size"}),!v&&(0,a.jsxs)("div",{style:{color:"#b8860b",fontWeight:600,fontSize:"1.08rem",marginBottom:18},children:["Please ",(0,a.jsx)("a",{href:"/login",style:{color:"#232F3E",textDecoration:"underline"},children:"login"})," or ",(0,a.jsx)("a",{href:"/register",style:{color:"#232F3E",textDecoration:"underline"},children:"register"})," to choose a size."]}),(0,a.jsx)("div",{className:"size-selectors",style:{display:"flex",gap:32,flexWrap:"wrap",marginBottom:18},children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:(x.variants||[]).map(e=>{const t=e.stock<=0;return(0,a.jsx)("button",{type:"button",className:"size-btn".concat(h===e.size?" selected":""),style:{padding:"0.6rem 1.3rem",borderRadius:8,border:h===e.size?"2px solid #FFD700":"1px solid #ddd",background:h===e.size?"#FFF8DC":"#fff",color:t?"#aaa":"#222",fontWeight:700,cursor:v&&!t?"pointer":"not-allowed",boxShadow:h===e.size?"0 2px 8px #FFD70044":"none",marginBottom:4,opacity:v&&!t?1:.6,textDecoration:t?"line-through":"none"},onClick:()=>v&&!t&&f(e.size),disabled:!v||t,children:e.size},e.size)})}),(0,a.jsxs)("div",{style:{marginTop:"1.5rem",display:"flex",alignItems:"center",gap:"10px"},children:[(0,a.jsx)("label",{htmlFor:"size-input",style:{fontWeight:700,color:"#232F3E"},children:"Enter Size:"}),(0,a.jsx)("input",{id:"size-input",type:"text",value:h,onChange:e=>f(e.target.value.toUpperCase()),placeholder:"e.g., M",style:{padding:"0.6rem",borderRadius:8,border:"1px solid #ddd",width:"100px",textAlign:"center",fontSize:"1rem",opacity:v?1:.6},disabled:!v})]})]})}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginTop:"1rem"},children:[(0,a.jsx)("label",{htmlFor:"quantity",style:{fontWeight:700,color:"#232F3E"},children:"Quantity:"}),(0,a.jsx)("input",{id:"quantity",type:"number",value:y,onChange:e=>{const t=parseInt(e.target.value,10);t>=1&&b(t)},min:"1",max:h?null===(e=x.variants)||void 0===e||null===(t=e.find(e=>e.size===h))||void 0===t?void 0:t.stock:1,style:{width:"70px",padding:"0.6rem",borderRadius:8,border:"1px solid #ddd",textAlign:"center",fontSize:"1rem",opacity:v&&(null===(i=x.variants)||void 0===i?void 0:i.reduce((e,t)=>e+t.stock,0))>0?1:.6},disabled:!v||0===(null===(d=x.variants)||void 0===d?void 0:d.reduce((e,t)=>e+t.stock,0))})]}),0===(null===(l=x.variants)||void 0===l?void 0:l.reduce((e,t)=>e+t.stock,0))?(0,a.jsx)("div",{style:{background:"#fbebeb",color:"#c00",border:"1px solid #f8d7da",borderRadius:8,padding:"0.8rem 1.7rem",fontWeight:700,minWidth:180,fontSize:"1.08rem",marginTop:10,textAlign:"center"},children:"Out of Stock"}):(0,a.jsx)("button",{className:"add-to-cart-btn",style:{background:"#232F3E",color:"#fff",border:"none",borderRadius:8,padding:"0.8rem 1.7rem",fontWeight:700,minWidth:180,fontSize:"1.08rem",marginTop:10,cursor:v&&h?"pointer":"not-allowed",opacity:v&&h?1:.6},disabled:!v||!h,onClick:()=>{if(!v)return void m("/login");const e=JSON.parse(localStorage.getItem("cart")||"[]");let t=x;if(!t._id){const e=JSON.parse(localStorage.getItem("backendProducts")||"[]").find(e=>e.name===p.name);e&&e._id&&(t=(0,r.A)((0,r.A)({},p),{},{_id:e._id}))}for(let i=0;i<y;i++)e.push({_id:t._id,id:t._id||t.id,name:t.name,price:t.price,image:t.image,size:h});localStorage.setItem("cart",JSON.stringify(e)),F(!0),window.dispatchEvent(new Event("productsUpdated")),setTimeout(()=>{F(!1)},2500)},children:"Add to Cart"})]}),z.length>0&&(0,a.jsxs)("div",{className:"related-products-section",style:{marginTop:24},children:[(0,a.jsx)("h2",{style:{fontWeight:700,fontSize:"1.15rem",color:"#232F3E",marginBottom:18},children:"Related Products"}),(0,a.jsxs)("div",{className:"related-products-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:22},children:[z.length>0&&(0,a.jsx)("style",{children:"\n                  @media (min-width: 900px) {\n                    .related-products-grid {\n                      grid-template-columns: repeat(5, 1fr) !important;\n                      gap: 1.5rem !important;\n                    }\n                  }\n                "}),z.map(e=>{const t=e._id||e.id;return(0,a.jsxs)("div",{className:"product-card",style:{position:"relative",background:"#fff",border:"1px solid #e5e7eb",borderRadius:"1.25rem",boxShadow:"0 4px 12px rgba(0,0,0,0.04)",padding:"1.25rem",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",justifyContent:"flex-start",minHeight:380},children:[!e.inStock&&!e.isBestPick&&(0,a.jsx)("div",{style:{position:"absolute",top:"15px",right:"-30px",background:"#e74c3c",color:"white",padding:"5px 35px",fontWeight:"bold",fontSize:"12px",transform:"rotate(45deg)",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:10},children:"SOLD OUT"}),(0,a.jsx)("div",{style:{width:"100%",height:220,marginBottom:"1rem",overflow:"hidden",borderRadius:"0.75rem"},children:(0,a.jsx)("img",{src:e.image,alt:e.name,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover",display:"block",filter:e.inStock?"none":"grayscale(0.5) brightness(0.85)"}})}),(0,a.jsx)("div",{style:{width:"100%",marginBottom:6,fontSize:"1rem",fontWeight:700,color:"#111",textAlign:"center",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.name}),(0,a.jsx)("div",{style:{width:"100%",color:"#333",fontSize:"0.95rem",lineHeight:1.4,marginBottom:8,textAlign:"center"},children:e.description||e.desc||"Premium quality at a great price."}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"center",gap:8,marginTop:4},children:[(0,a.jsx)("div",{style:{fontWeight:800,fontSize:"1.15rem",color:"#FFD700"},children:e.price?"TZS ".concat(e.price):"TZS 9,900"}),e.listPrice&&(0,a.jsx)("div",{style:{color:"#777",textDecoration:"line-through",fontSize:"0.95rem"},children:"TZS ".concat(e.listPrice)})]}),(0,a.jsx)("div",{style:{width:"100%",marginTop:8},children:(0,a.jsx)("button",{type:"button",style:{background:"#FFD700",color:"#222",border:"none",borderRadius:8,padding:"0.5rem 1.2rem",fontWeight:700,width:"100%",maxWidth:180,cursor:e.inStock||e.isBestPick?"pointer":"not-allowed",marginBottom:6,opacity:e.inStock||e.isBestPick?1:.6},onClick:()=>{(e.inStock||e.isBestPick)&&m("/select-size",{state:{product:e}})},disabled:!e.inStock&&!e.isBestPick,children:e.inStock||e.isBestPick?"View":"Sold Out"})})]},t)})]})]})]}),(0,a.jsx)("style",{children:"\n        .select-size-full { font-family: 'Segoe UI', Arial, sans-serif; }\n        .product-flex { flex-direction: row; }\n        @media (max-width: 900px) {\n          .product-flex { flex-direction: column; align-items: center; }\n          .product-image { margin-bottom: 18px; }\n        }\n        .size-btn.selected { border: 2px solid #FFD700 !important; background: #FFF8DC !important; box-shadow: 0 2px 8px #FFD70044; }\n        .add-to-cart-btn { transition: background 0.2s; }\n        .add-to-cart-btn:hover:not(:disabled) { background: #FFD700; color: #232F3E; }\n        .related-products-grid { margin-top: 0; }\n        .related-product-card:hover { box-shadow: 0 4px 16px #FFD70033; }\n      "})]})}}}]);
//# sourceMappingURL=534.dc67200b.chunk.js.map